<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.4.1"/><meta data-react-helmet="true" property="og:locale" content="en"/><meta data-react-helmet="true" property="og:locale:alternate" content="ar"/><meta data-react-helmet="true" property="og:locale:alternate" content="az"/><meta data-react-helmet="true" property="og:locale:alternate" content="bg"/><meta data-react-helmet="true" property="og:locale:alternate" content="bn"/><meta data-react-helmet="true" property="og:locale:alternate" content="ca"/><meta data-react-helmet="true" property="og:locale:alternate" content="cs"/><meta data-react-helmet="true" property="og:locale:alternate" content="da"/><meta data-react-helmet="true" property="og:locale:alternate" content="de"/><meta data-react-helmet="true" property="og:locale:alternate" content="el"/><meta data-react-helmet="true" property="og:locale:alternate" content="es"/><meta data-react-helmet="true" property="og:locale:alternate" content="fa"/><meta data-react-helmet="true" property="og:locale:alternate" content="fi"/><meta data-react-helmet="true" property="og:locale:alternate" content="fr"/><meta data-react-helmet="true" property="og:locale:alternate" content="gl"/><meta data-react-helmet="true" property="og:locale:alternate" content="gu"/><meta data-react-helmet="true" property="og:locale:alternate" content="hi"/><meta data-react-helmet="true" property="og:locale:alternate" content="hr"/><meta data-react-helmet="true" property="og:locale:alternate" content="hu"/><meta data-react-helmet="true" property="og:locale:alternate" content="id"/><meta data-react-helmet="true" property="og:locale:alternate" content="ig"/><meta data-react-helmet="true" property="og:locale:alternate" content="it"/><meta data-react-helmet="true" property="og:locale:alternate" content="ja"/><meta data-react-helmet="true" property="og:locale:alternate" content="ka"/><meta data-react-helmet="true" property="og:locale:alternate" content="kk"/><meta data-react-helmet="true" property="og:locale:alternate" content="km"/><meta data-react-helmet="true" property="og:locale:alternate" content="ko"/><meta data-react-helmet="true" property="og:locale:alternate" content="lt"/><meta data-react-helmet="true" property="og:locale:alternate" content="ml"/><meta data-react-helmet="true" property="og:locale:alternate" content="mr"/><meta data-react-helmet="true" property="og:locale:alternate" content="ms"/><meta data-react-helmet="true" property="og:locale:alternate" content="nl"/><meta data-react-helmet="true" property="og:locale:alternate" content="nb"/><meta data-react-helmet="true" property="og:locale:alternate" content="fil"/><meta data-react-helmet="true" property="og:locale:alternate" content="pl"/><meta data-react-helmet="true" property="og:locale:alternate" content="pt"/><meta data-react-helmet="true" property="og:locale:alternate" content="pt_br"/><meta data-react-helmet="true" property="og:locale:alternate" content="ro"/><meta data-react-helmet="true" property="og:locale:alternate" content="ru"/><meta data-react-helmet="true" property="og:locale:alternate" content="se"/><meta data-react-helmet="true" property="og:locale:alternate" content="sk"/><meta data-react-helmet="true" property="og:locale:alternate" content="sl"/><meta data-react-helmet="true" property="og:locale:alternate" content="sr"/><meta data-react-helmet="true" property="og:locale:alternate" content="sw"/><meta data-react-helmet="true" property="og:locale:alternate" content="ta"/><meta data-react-helmet="true" property="og:locale:alternate" content="th"/><meta data-react-helmet="true" property="og:locale:alternate" content="tr"/><meta data-react-helmet="true" property="og:locale:alternate" content="uk"/><meta data-react-helmet="true" property="og:locale:alternate" content="uz"/><meta data-react-helmet="true" property="og:locale:alternate" content="vi"/><meta data-react-helmet="true" property="og:locale:alternate" content="zh"/><meta data-react-helmet="true" property="og:locale:alternate" content="zh_tw"/><meta data-react-helmet="true" name="description" content="How does the standard bridge for Optimism work? Why does it work this way?"/><meta data-react-helmet="true" name="image"/><meta data-react-helmet="true" property="og:title" content="Optimism standard bridge contract walkthrough | ethereum.org"/><meta data-react-helmet="true" property="og:description" content="How does the standard bridge for Optimism work? Why does it work this way?"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@ethereum"/><meta data-react-helmet="true" name="twitter:site" content="@ethereum"/><meta data-react-helmet="true" name="twitter:title" content="Optimism standard bridge contract walkthrough | ethereum.org"/><meta data-react-helmet="true" name="twitter:description" content="How does the standard bridge for Optimism work? Why does it work this way?"/><meta data-react-helmet="true" name="twitter:image" content="https://ethereum.org/static/bf78b49d7e23b88a7eea934225b0cf96/1548e/enterprise-eth.png"/><meta data-react-helmet="true" property="og:url" content="https://ethereum.org"/><meta data-react-helmet="true" property="og:image" content="https://ethereum.org/static/bf78b49d7e23b88a7eea934225b0cf96/1548e/enterprise-eth.png"/><meta data-react-helmet="true" property="og:video" content="https://www.youtube.com/channel/UCNOfzGXD_C9YMYmnefmPH0g"/><meta data-react-helmet="true" property="og:site_name" content="ethereum.org"/><meta name="theme-color" content="#222222"/><title data-react-helmet="true">Optimism standard bridge contract walkthrough | ethereum.org</title><link data-react-helmet="true" rel="alternate" hrefLang="x-default" href="https://ethereum.org"/><link data-react-helmet="true" rel="alternate" hrefLang="en" href="https://ethereum.org/en/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ar" href="https://ethereum.org/ar/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="az" href="https://ethereum.org/az/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="bg" href="https://ethereum.org/bg/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="bn" href="https://ethereum.org/bn/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ca" href="https://ethereum.org/ca/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="cs" href="https://ethereum.org/cs/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="da" href="https://ethereum.org/da/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="de" href="https://ethereum.org/de/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="el" href="https://ethereum.org/el/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="es" href="https://ethereum.org/es/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="fa" href="https://ethereum.org/fa/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="fi" href="https://ethereum.org/fi/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="fr" href="https://ethereum.org/fr/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="gl" href="https://ethereum.org/gl/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="gu" href="https://ethereum.org/gu/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="hi" href="https://ethereum.org/hi/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="hr" href="https://ethereum.org/hr/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="hu" href="https://ethereum.org/hu/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="id" href="https://ethereum.org/id/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ig" href="https://ethereum.org/ig/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="it" href="https://ethereum.org/it/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ja" href="https://ethereum.org/ja/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ka" href="https://ethereum.org/ka/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="kk" href="https://ethereum.org/kk/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="km" href="https://ethereum.org/km/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ko" href="https://ethereum.org/ko/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="lt" href="https://ethereum.org/lt/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ml" href="https://ethereum.org/ml/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="mr" href="https://ethereum.org/mr/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ms" href="https://ethereum.org/ms/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="nl" href="https://ethereum.org/nl/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="nb" href="https://ethereum.org/nb/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="fil" href="https://ethereum.org/ph/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="pl" href="https://ethereum.org/pl/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="pt" href="https://ethereum.org/pt/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="pt-br" href="https://ethereum.org/pt-br/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ro" href="https://ethereum.org/ro/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ru" href="https://ethereum.org/ru/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="se" href="https://ethereum.org/se/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="sk" href="https://ethereum.org/sk/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="sl" href="https://ethereum.org/sl/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="sr" href="https://ethereum.org/sr/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="sw" href="https://ethereum.org/sw/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="ta" href="https://ethereum.org/ta/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="th" href="https://ethereum.org/th/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="tr" href="https://ethereum.org/tr/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="uk" href="https://ethereum.org/uk/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="uz" href="https://ethereum.org/uz/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="vi" href="https://ethereum.org/vi/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="zh" href="https://ethereum.org/zh/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="alternate" hrefLang="zh-tw" href="https://ethereum.org/zh-tw/developers/tutorials/optimism-std-bridge-annotated-code/"/><link data-react-helmet="true" rel="canonical" href="https://ethereum.org/en/developers/tutorials/optimism-std-bridge-annotated-code/"/><script data-react-helmet="true" type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "url": "https://ethereum.org",
          "email": "press@ethereum.org",
          "name": "Ethereum",
          "logo": "https://ethereum.org/og-image.png"
        }
      </script><link rel="icon" href="/favicon-32x32.png?v=8b512faa8d4a0b019c123a771b6622aa" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=8b512faa8d4a0b019c123a771b6622aa"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=8b512faa8d4a0b019c123a771b6622aa"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=8b512faa8d4a0b019c123a771b6622aa"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=8b512faa8d4a0b019c123a771b6622aa"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=8b512faa8d4a0b019c123a771b6622aa"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=8b512faa8d4a0b019c123a771b6622aa"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=8b512faa8d4a0b019c123a771b6622aa"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=8b512faa8d4a0b019c123a771b6622aa"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style type="text/css">
    .header-anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .header-anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .header-anchor svg,
    h2 .header-anchor svg,
    h3 .header-anchor svg,
    h4 .header-anchor svg,
    h5 .header-anchor svg,
    h6 .header-anchor svg {
      visibility: hidden;
    }
    h1:hover .header-anchor svg,
    h2:hover .header-anchor svg,
    h3:hover .header-anchor svg,
    h4:hover .header-anchor svg,
    h5:hover .header-anchor svg,
    h6:hover .header-anchor svg,
    h1 .header-anchor:focus svg,
    h2 .header-anchor:focus svg,
    h3 .header-anchor:focus svg,
    h4 .header-anchor:focus svg,
    h5 .header-anchor:focus svg,
    h6 .header-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="preconnect" href="https://matomo.ethereum.org"/></head><body><script id="chakra-script">!(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="light",e="chakra-ui-color-mode",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();</script><div id="___gatsby"><style data-emotion="css-global y360fj">:host,:root,[data-theme]{--chakra-ring-inset:var(--chakra-empty,/*!*/ /*!*/);--chakra-ring-offset-width:0px;--chakra-ring-offset-color:#fff;--chakra-ring-color:rgba(66, 153, 225, 0.6);--chakra-ring-offset-shadow:0 0 #0000;--chakra-ring-shadow:0 0 #0000;--chakra-space-x-reverse:0;--chakra-space-y-reverse:0;--eth-colors-transparent:transparent;--eth-colors-current:currentColor;--eth-colors-whiteAlpha-50:rgba(255, 255, 255, 0.04);--eth-colors-whiteAlpha-100:rgba(255, 255, 255, 0.06);--eth-colors-whiteAlpha-200:rgba(255, 255, 255, 0.08);--eth-colors-whiteAlpha-300:rgba(255, 255, 255, 0.16);--eth-colors-whiteAlpha-400:rgba(255, 255, 255, 0.24);--eth-colors-whiteAlpha-500:rgba(255, 255, 255, 0.36);--eth-colors-whiteAlpha-600:rgba(255, 255, 255, 0.48);--eth-colors-whiteAlpha-700:rgba(255, 255, 255, 0.64);--eth-colors-whiteAlpha-800:rgba(255, 255, 255, 0.80);--eth-colors-whiteAlpha-900:rgba(255, 255, 255, 0.92);--eth-colors-blackAlpha-50:rgba(0, 0, 0, 0.04);--eth-colors-blackAlpha-100:rgba(0, 0, 0, 0.06);--eth-colors-blackAlpha-200:rgba(0, 0, 0, 0.08);--eth-colors-blackAlpha-300:rgba(0, 0, 0, 0.16);--eth-colors-blackAlpha-400:rgba(0, 0, 0, 0.24);--eth-colors-blackAlpha-500:rgba(0, 0, 0, 0.36);--eth-colors-blackAlpha-600:rgba(0, 0, 0, 0.48);--eth-colors-blackAlpha-700:rgba(0, 0, 0, 0.64);--eth-colors-blackAlpha-800:rgba(0, 0, 0, 0.80);--eth-colors-blackAlpha-900:rgba(0, 0, 0, 0.92);--eth-colors-gray-50:#F7FAFC;--eth-colors-gray-100:#f7f7f7;--eth-colors-gray-200:#E2E8F0;--eth-colors-gray-300:#d4d4d4;--eth-colors-gray-400:#b0b0b0;--eth-colors-gray-500:#646464;--eth-colors-gray-600:#4A5568;--eth-colors-gray-700:#222222;--eth-colors-gray-800:#1A202C;--eth-colors-gray-900:#141414;--eth-colors-red-50:#FFF5F5;--eth-colors-red-100:#F7C8C8;--eth-colors-red-200:#FEB2B2;--eth-colors-red-300:#FC8181;--eth-colors-red-400:#F56565;--eth-colors-red-500:#b80000;--eth-colors-red-600:#C53030;--eth-colors-red-700:#9B2C2C;--eth-colors-red-800:#822727;--eth-colors-red-900:#1B0C0C;--eth-colors-orange-50:#FFFAF0;--eth-colors-orange-100:#ffe3d3;--eth-colors-orange-200:#FBD38D;--eth-colors-orange-300:#ffb991;--eth-colors-orange-400:#ED8936;--eth-colors-orange-500:#ff7324;--eth-colors-orange-600:#C05621;--eth-colors-orange-700:#9C4221;--eth-colors-orange-800:#451900;--eth-colors-orange-900:#652B19;--eth-colors-yellow-50:#FFFFF0;--eth-colors-yellow-100:#FEFCBF;--eth-colors-yellow-200:#fff8df;--eth-colors-yellow-300:#F6E05E;--eth-colors-yellow-400:#ECC94B;--eth-colors-yellow-500:#D69E2E;--eth-colors-yellow-600:#B7791F;--eth-colors-yellow-700:#975A16;--eth-colors-yellow-800:#744210;--eth-colors-yellow-900:#5F370E;--eth-colors-green-50:#F0FFF4;--eth-colors-green-100:#C8F7D8;--eth-colors-green-200:#9AE6B4;--eth-colors-green-300:#68D391;--eth-colors-green-400:#48BB78;--eth-colors-green-500:#109e62;--eth-colors-green-600:#2F855A;--eth-colors-green-700:#276749;--eth-colors-green-800:#22543D;--eth-colors-green-900:#0A160E;--eth-colors-teal-50:#E6FFFA;--eth-colors-teal-100:#B2F5EA;--eth-colors-teal-200:#81E6D9;--eth-colors-teal-300:#4FD1C5;--eth-colors-teal-400:#38B2AC;--eth-colors-teal-500:#319795;--eth-colors-teal-600:#2C7A7B;--eth-colors-teal-700:#285E61;--eth-colors-teal-800:#234E52;--eth-colors-teal-900:#1D4044;--eth-colors-blue-50:#ebf8ff;--eth-colors-blue-100:#e8e8ff;--eth-colors-blue-200:#90cdf4;--eth-colors-blue-300:#8d8dff;--eth-colors-blue-400:#4299e1;--eth-colors-blue-500:#1c1cff;--eth-colors-blue-600:#2b6cb0;--eth-colors-blue-700:#0b0b66;--eth-colors-blue-800:#2a4365;--eth-colors-blue-900:#1A365D;--eth-colors-cyan-50:#EDFDFD;--eth-colors-cyan-100:#C4F1F9;--eth-colors-cyan-200:#9DECF9;--eth-colors-cyan-300:#76E4F7;--eth-colors-cyan-400:#0BC5EA;--eth-colors-cyan-500:#00B5D8;--eth-colors-cyan-600:#00A3C4;--eth-colors-cyan-700:#0987A0;--eth-colors-cyan-800:#086F83;--eth-colors-cyan-900:#065666;--eth-colors-purple-50:#FAF5FF;--eth-colors-purple-100:#E9D8FD;--eth-colors-purple-200:#D6BCFA;--eth-colors-purple-300:#B794F4;--eth-colors-purple-400:#9F7AEA;--eth-colors-purple-500:#805AD5;--eth-colors-purple-600:#6B46C1;--eth-colors-purple-700:#553C9A;--eth-colors-purple-800:#44337A;--eth-colors-purple-900:#322659;--eth-colors-pink-50:#FFF5F7;--eth-colors-pink-100:#FED7E2;--eth-colors-pink-200:#FBB6CE;--eth-colors-pink-300:#F687B3;--eth-colors-pink-400:#ED64A6;--eth-colors-pink-500:#D53F8C;--eth-colors-pink-600:#B83280;--eth-colors-pink-700:#97266D;--eth-colors-pink-800:#702459;--eth-colors-pink-900:#521B41;--eth-colors-linkedin-50:#E8F4F9;--eth-colors-linkedin-100:#CFEDFB;--eth-colors-linkedin-200:#9BDAF3;--eth-colors-linkedin-300:#68C7EC;--eth-colors-linkedin-400:#34B3E4;--eth-colors-linkedin-500:#00A0DC;--eth-colors-linkedin-600:#008CC9;--eth-colors-linkedin-700:#0077B5;--eth-colors-linkedin-800:#005E93;--eth-colors-linkedin-900:#004471;--eth-colors-facebook-50:#E8F4F9;--eth-colors-facebook-100:#D9DEE9;--eth-colors-facebook-200:#B7C2DA;--eth-colors-facebook-300:#6482C0;--eth-colors-facebook-400:#4267B2;--eth-colors-facebook-500:#385898;--eth-colors-facebook-600:#314E89;--eth-colors-facebook-700:#29487D;--eth-colors-facebook-800:#223B67;--eth-colors-facebook-900:#1E355B;--eth-colors-messenger-50:#D0E6FF;--eth-colors-messenger-100:#B9DAFF;--eth-colors-messenger-200:#A2CDFF;--eth-colors-messenger-300:#7AB8FF;--eth-colors-messenger-400:#2E90FF;--eth-colors-messenger-500:#0078FF;--eth-colors-messenger-600:#0063D1;--eth-colors-messenger-700:#0052AC;--eth-colors-messenger-800:#003C7E;--eth-colors-messenger-900:#002C5C;--eth-colors-whatsapp-50:#dffeec;--eth-colors-whatsapp-100:#b9f5d0;--eth-colors-whatsapp-200:#90edb3;--eth-colors-whatsapp-300:#65e495;--eth-colors-whatsapp-400:#3cdd78;--eth-colors-whatsapp-500:#22c35e;--eth-colors-whatsapp-600:#179848;--eth-colors-whatsapp-700:#0c6c33;--eth-colors-whatsapp-800:#01421c;--eth-colors-whatsapp-900:#001803;--eth-colors-twitter-50:#E5F4FD;--eth-colors-twitter-100:#C8E9FB;--eth-colors-twitter-200:#A8DCFA;--eth-colors-twitter-300:#83CDF7;--eth-colors-twitter-400:#57BBF5;--eth-colors-twitter-500:#1DA1F2;--eth-colors-twitter-600:#1A94DA;--eth-colors-twitter-700:#1681BF;--eth-colors-twitter-800:#136B9E;--eth-colors-twitter-900:#0D4D71;--eth-colors-telegram-50:#E3F2F9;--eth-colors-telegram-100:#C5E4F3;--eth-colors-telegram-200:#A2D4EC;--eth-colors-telegram-300:#7AC1E4;--eth-colors-telegram-400:#47A9DA;--eth-colors-telegram-500:#0088CC;--eth-colors-telegram-600:#007AB8;--eth-colors-telegram-700:#006BA1;--eth-colors-telegram-800:#005885;--eth-colors-telegram-900:#003F5E;--eth-borders-none:0;--eth-borders-1px:1px solid;--eth-borders-2px:2px solid;--eth-borders-4px:4px solid;--eth-borders-8px:8px solid;--eth-fonts-heading:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;--eth-fonts-body:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;--eth-fonts-mono:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--eth-fonts-monospace:SFMono-Regular,Consolas,'Roboto Mono','Droid Sans Mono','Liberation Mono',Menlo,Courier,monospace;--eth-fontSizes-xs:0.75rem;--eth-fontSizes-sm:0.875rem;--eth-fontSizes-md:1rem;--eth-fontSizes-lg:1.125rem;--eth-fontSizes-xl:1.25rem;--eth-fontSizes-2xl:1.5rem;--eth-fontSizes-3xl:1.875rem;--eth-fontSizes-4xl:2.25rem;--eth-fontSizes-5xl:3rem;--eth-fontSizes-6xl:3.75rem;--eth-fontSizes-7xl:4.5rem;--eth-fontSizes-8xl:6rem;--eth-fontSizes-9xl:8rem;--eth-fontWeights-hairline:100;--eth-fontWeights-thin:200;--eth-fontWeights-light:300;--eth-fontWeights-normal:400;--eth-fontWeights-medium:500;--eth-fontWeights-semibold:600;--eth-fontWeights-bold:700;--eth-fontWeights-extrabold:800;--eth-fontWeights-black:900;--eth-letterSpacings-tighter:-0.05em;--eth-letterSpacings-tight:-0.025em;--eth-letterSpacings-normal:0;--eth-letterSpacings-wide:0.025em;--eth-letterSpacings-wider:0.05em;--eth-letterSpacings-widest:0.1em;--eth-lineHeights-3:.75rem;--eth-lineHeights-4:1rem;--eth-lineHeights-5:1.25rem;--eth-lineHeights-6:1.5rem;--eth-lineHeights-7:1.75rem;--eth-lineHeights-8:2rem;--eth-lineHeights-9:2.25rem;--eth-lineHeights-10:2.5rem;--eth-lineHeights-normal:normal;--eth-lineHeights-none:1;--eth-lineHeights-shorter:1.25;--eth-lineHeights-short:1.375;--eth-lineHeights-base:1.5;--eth-lineHeights-tall:1.625;--eth-lineHeights-taller:2;--eth-radii-none:0;--eth-radii-sm:0.125rem;--eth-radii-base:0.25rem;--eth-radii-md:0.375rem;--eth-radii-lg:0.5rem;--eth-radii-xl:0.75rem;--eth-radii-2xl:1rem;--eth-radii-3xl:1.5rem;--eth-radii-full:9999px;--eth-space-1:0.25rem;--eth-space-2:0.5rem;--eth-space-3:0.75rem;--eth-space-4:1rem;--eth-space-5:1.25rem;--eth-space-6:1.5rem;--eth-space-7:1.75rem;--eth-space-8:2rem;--eth-space-9:2.25rem;--eth-space-10:2.5rem;--eth-space-12:3rem;--eth-space-14:3.5rem;--eth-space-16:4rem;--eth-space-20:5rem;--eth-space-24:6rem;--eth-space-28:7rem;--eth-space-32:8rem;--eth-space-36:9rem;--eth-space-40:10rem;--eth-space-44:11rem;--eth-space-48:12rem;--eth-space-52:13rem;--eth-space-56:14rem;--eth-space-60:15rem;--eth-space-64:16rem;--eth-space-72:18rem;--eth-space-80:20rem;--eth-space-96:24rem;--eth-space-px:1px;--eth-space-0-5:0.125rem;--eth-space-1-5:0.375rem;--eth-space-2-5:0.625rem;--eth-space-3-5:0.875rem;--eth-shadows-xs:0 0 0 1px rgba(0, 0, 0, 0.05);--eth-shadows-sm:0 1px 2px 0 rgba(0, 0, 0, 0.05);--eth-shadows-base:0 1px 3px 0 rgba(0, 0, 0, 0.1),0 1px 2px 0 rgba(0, 0, 0, 0.06);--eth-shadows-md:0 4px 6px -1px rgba(0, 0, 0, 0.1),0 2px 4px -1px rgba(0, 0, 0, 0.06);--eth-shadows-lg:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);--eth-shadows-xl:0 20px 25px -5px rgba(0, 0, 0, 0.1),0 10px 10px -5px rgba(0, 0, 0, 0.04);--eth-shadows-2xl:0 25px 50px -12px rgba(0, 0, 0, 0.25);--eth-shadows-outline:0 0 0 4px var(--eth-colors-primaryHover);--eth-shadows-inner:inset 0 2px 4px 0 rgba(0,0,0,0.06);--eth-shadows-none:none;--eth-shadows-dark-lg:rgba(0, 0, 0, 0.1) 0px 0px 0px 1px,rgba(0, 0, 0, 0.2) 0px 5px 10px,rgba(0, 0, 0, 0.4) 0px 15px 40px;--eth-shadows-primary:4px 4px 0px 0px var(--eth-colors-primaryLight);--eth-shadows-table:0 14px 66px rgba(0,0,0,.07),0 10px 17px rgba(0,0,0,.03),0 4px 7px rgba(0,0,0,.05);--eth-shadows-drop:0 4px 17px 0 var(--eth-colors-blackAlpha-200);--eth-shadows-tableBox-light:0 14px 66px rgba(0,0,0,.07),0 10px 17px rgba(0,0,0,.03),0 4px 7px rgba(0,0,0,.05);--eth-shadows-tableBox-dark:0 14px 66px hsla(0,0%,96.1%,.07),0 10px 17px hsla(0,0%,96.1%,.03),0 4px 7px hsla(0,0%,96.1%,.05);--eth-shadows-tableBoxHover:0px 8px 17px rgba(0, 0, 0, 0.15);--eth-shadows-tableItemBox-light:0 1px 1px rgba(0, 0, 0, 0.1);--eth-shadows-tableItemBox-dark:0 1px 1px hsla(0,0%,100%,.1);--eth-shadows-tableItemBoxHover:0 0 1px var(--eth-colors-primary);--eth-sizes-1:0.25rem;--eth-sizes-2:0.5rem;--eth-sizes-3:0.75rem;--eth-sizes-4:1rem;--eth-sizes-5:1.25rem;--eth-sizes-6:1.5rem;--eth-sizes-7:1.75rem;--eth-sizes-8:2rem;--eth-sizes-9:2.25rem;--eth-sizes-10:2.5rem;--eth-sizes-12:3rem;--eth-sizes-14:3.5rem;--eth-sizes-16:4rem;--eth-sizes-20:5rem;--eth-sizes-24:6rem;--eth-sizes-28:7rem;--eth-sizes-32:8rem;--eth-sizes-36:9rem;--eth-sizes-40:10rem;--eth-sizes-44:11rem;--eth-sizes-48:12rem;--eth-sizes-52:13rem;--eth-sizes-56:14rem;--eth-sizes-60:15rem;--eth-sizes-64:16rem;--eth-sizes-72:18rem;--eth-sizes-80:20rem;--eth-sizes-96:24rem;--eth-sizes-px:1px;--eth-sizes-0-5:0.125rem;--eth-sizes-1-5:0.375rem;--eth-sizes-2-5:0.625rem;--eth-sizes-3-5:0.875rem;--eth-sizes-max:max-content;--eth-sizes-min:min-content;--eth-sizes-full:100%;--eth-sizes-3xs:14rem;--eth-sizes-2xs:16rem;--eth-sizes-xs:20rem;--eth-sizes-sm:24rem;--eth-sizes-md:28rem;--eth-sizes-lg:32rem;--eth-sizes-xl:36rem;--eth-sizes-2xl:42rem;--eth-sizes-3xl:48rem;--eth-sizes-4xl:56rem;--eth-sizes-5xl:64rem;--eth-sizes-6xl:72rem;--eth-sizes-7xl:80rem;--eth-sizes-8xl:90rem;--eth-sizes-container-sm:640px;--eth-sizes-container-md:768px;--eth-sizes-container-lg:1024px;--eth-sizes-container-xl:1280px;--eth-zIndices-hide:-1;--eth-zIndices-auto:auto;--eth-zIndices-base:0;--eth-zIndices-docked:10;--eth-zIndices-dropdown:1000;--eth-zIndices-sticky:1100;--eth-zIndices-banner:1200;--eth-zIndices-overlay:1300;--eth-zIndices-modal:1400;--eth-zIndices-popover:1500;--eth-zIndices-skipLink:1600;--eth-zIndices-toast:1700;--eth-zIndices-tooltip:1800;--eth-transition-property-common:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;--eth-transition-property-colors:background-color,border-color,color,fill,stroke;--eth-transition-property-dimensions:width,height;--eth-transition-property-position:left,right,top,bottom;--eth-transition-property-background:background-color,background-image,background-position;--eth-transition-easing-ease-in:cubic-bezier(0.4, 0, 1, 1);--eth-transition-easing-ease-out:cubic-bezier(0, 0, 0.2, 1);--eth-transition-easing-ease-in-out:cubic-bezier(0.4, 0, 0.2, 1);--eth-transition-duration-ultra-fast:50ms;--eth-transition-duration-faster:100ms;--eth-transition-duration-fast:150ms;--eth-transition-duration-normal:200ms;--eth-transition-duration-slow:300ms;--eth-transition-duration-slower:400ms;--eth-transition-duration-ultra-slow:500ms;--eth-blur-none:0;--eth-blur-sm:4px;--eth-blur-base:8px;--eth-blur-md:12px;--eth-blur-lg:16px;--eth-blur-xl:24px;--eth-blur-2xl:40px;--eth-blur-3xl:64px;--eth-colors-error:var(--eth-colors-red-500);--eth-colors-attention:var(--eth-colors-yellow-200);}.chakra-ui-light :host:not([data-theme]),.chakra-ui-light :root:not([data-theme]),.chakra-ui-light [data-theme]:not([data-theme]),[data-theme=light] :host:not([data-theme]),[data-theme=light] :root:not([data-theme]),[data-theme=light] [data-theme]:not([data-theme]),:host[data-theme=light],:root[data-theme=light],[data-theme][data-theme=light]{--eth-colors-black:#000000;--eth-colors-white:#ffffff;--eth-colors-chakra-body-text:var(--eth-colors-gray-800);--eth-colors-chakra-body-bg:var(--eth-colors-white);--eth-colors-chakra-border-color:var(--eth-colors-gray-200);--eth-colors-chakra-placeholder-color:var(--eth-colors-gray-500);--eth-colors-white500:#ffffff;--eth-colors-white600:#f7f7f7;--eth-colors-white700:#e5e5e5;--eth-colors-white800:#ccc;--eth-colors-white900:#b2b2b2;--eth-colors-black500:#000000;--eth-colors-black400:#191919;--eth-colors-black300:#333;--eth-colors-black200:#4c4c4c;--eth-colors-black100:#666;--eth-colors-black50:#7f7f7f;--eth-colors-boxShadow:rgba(0,0,0,0.12);--eth-colors-boxShadowHover:rgba(0,0,0,0.24);--eth-colors-secondary:#b2b2b2;--eth-colors-success900:#031f13;--eth-colors-success800:#063f27;--eth-colors-success700:#095e3a;--eth-colors-success600:#0c7e4e;--eth-colors-success:var(--eth-colors-green-500);--eth-colors-success500:#109e62;--eth-colors-success400:#3fb181;--eth-colors-success300:#6fc4a0;--eth-colors-success200:#9fd8c0;--eth-colors-success100:#cfebdf;--eth-colors-fail900:#240000;--eth-colors-fail800:#490000;--eth-colors-fail700:#6e0000;--eth-colors-fail600:#930000;--eth-colors-fail:#b80000;--eth-colors-fail500:#b80000;--eth-colors-fail400:#c63333;--eth-colors-fail300:#d46666;--eth-colors-fail200:#e29999;--eth-colors-fail100:#f0cccc;--eth-colors-tagBlue:#d1d1ff;--eth-colors-tagOrange:#ffe3d3;--eth-colors-tagGreen:#cfebdf;--eth-colors-tagRed:#f0cccc;--eth-colors-tagTurquoise:#ccfcff;--eth-colors-tagGray:#e5e5e5;--eth-colors-tagYellow:#fff8df;--eth-colors-tagMint:#e1fefa;--eth-colors-tagPink:#ffe5f9;--eth-colors-warning:#ffe3d3;--eth-colors-warningLink:#994515;--eth-colors-warningLinkHover:#321607;--eth-colors-lowBug:#ffe3d3;--eth-colors-mediumBug:#ffab7b;--eth-colors-primaryLight300:#7676ff;--eth-colors-primaryDark300:#ffab7b;--eth-colors-yellow:#fff8df;--eth-colors-gridYellow:#ffe78e;--eth-colors-gridRed:#ef7d7d;--eth-colors-gridBlue:#a7d0f4;--eth-colors-gridGreen:#6fc4a0;--eth-colors-gridOrange:#ffab7b;--eth-colors-gridPink:#ffa1c3;--eth-colors-gridPurple:#a4a4ff;--eth-colors-infoBanner:#e8e8ff;--eth-colors-buttonColor:#ffffff;--eth-colors-upgradesGradient:linear-gradient(285.24deg, #F7CBC0 0%, #F4B1AB 29.8%, #8476D9 49.78%, #85ACF9 54.14%, #1C1CE1 61.77%, #000000 69.77%);--eth-colors-runNodeGradient:linear-gradient(0deg, rgba(153, 157, 244, 0.1) 0%, rgba(153, 157, 244, 0) 100%),linear-gradient(270.72deg, #FDF0FF 0.62%, rgba(236, 195, 195, 0.557292) 32.61%, rgba(207, 189, 230, 0.296875) 49.67%, rgba(196, 196, 196, 0) 72.88%);--eth-colors-runNodeGradient2:linear-gradient(135deg, rgba(79, 113, 235, 0.2) 9.8%, rgba(232, 79, 235, 0.2) 92.84%);--eth-colors-ghostCardBackground:#ffffff;--eth-colors-ghostCardGhost:#f7f7f7;--eth-colors-secondaryButtonBackgroundActive:#e5e5e5;--eth-colors-primary:var(--eth-colors-blue-500);--eth-colors-primary950:#040426;--eth-colors-primary900:#050532;--eth-colors-primary800:#0b0b66;--eth-colors-primary700:#101099;--eth-colors-primary600:#1616cc;--eth-colors-primary500:#1c1cff;--eth-colors-primary400:#4949ff;--eth-colors-primary300:#7676ff;--eth-colors-primary200:#a4a4ff;--eth-colors-primary100:#d1d1ff;--eth-colors-primaryHover:var(--eth-colors-blue-300);--eth-colors-primaryActive:#1616cc;--eth-colors-lightBorder:#ececec;--eth-colors-priceCardBackgroundPositive:linear-gradient( 0, rgba(207, 236, 224, 0.6) 0%, rgba(207, 236, 224, 0) 100%);--eth-colors-priceCardBackgroundNegative:linear-gradient(180deg, rgba(241, 204, 204, 0.4) 0%, rgba(241, 204, 204, 0) 100%);--eth-colors-priceCardBorder:#ececec;--eth-colors-priceCardBorderNegative:#ececec;--eth-colors-searchBorder:#7f7f7f;--eth-colors-searchBackground:#ffffff;--eth-colors-searchBackgroundEmpty:#f2f2f2;--eth-colors-searchResultText:#33363d;--eth-colors-searchResultBackground:#f1f3f5;--eth-colors-selectHover:#d1d1ff;--eth-colors-selectActive:#a4a4ff;--eth-colors-dropdownBackground:#ffffff;--eth-colors-dropdownBackgroundHover:#f2f2f2;--eth-colors-dropdownBorder:#e5e5e5;--eth-colors-markBackground:rgba(143,187,237,.1);--eth-colors-markUnderline:rgba(143,187,237,.5);--eth-colors-modalBackground:hsla(0, 0%, 69.8%, 0.9);--eth-colors-text:#333333;--eth-colors-text200:#666666;--eth-colors-text300:#4c4c4c;--eth-colors-textTableOfContents:#7f7f7f;--eth-colors-background:var(--eth-colors-white);--eth-colors-ednBackground:#f7f7f7;--eth-colors-layer2ContentSecondary:#e5e5e5;--eth-colors-border:#e5e5e5;--eth-colors-tableBoxShadow:0 14px 66px rgba(0,0,0,.07),0 10px 17px rgba(0,0,0,.03),0 4px 7px rgba(0,0,0,.05);--eth-colors-tableItemBoxShadow:rgba(0, 0, 0, 0.1);--eth-colors-tableBackgroundHover:#f2f2f2;--eth-colors-preBackground:#f2f2f2;--eth-colors-preBorder:rgba(0,0,0,.05);--eth-colors-homeDivider:#a4a4f3;--eth-colors-displayDark:none;--eth-colors-displayLight:block;--eth-colors-grayBackground:#fcfcfc;--eth-colors-cardGradient:radial-gradient(46.28% 66.31% at 66.95% 58.35%, #e6e6f7 0%, #e7edfa 50%, #e9fbfa 100%);--eth-colors-upgradeStatusBackground:linear-gradient(180deg, rgba(0, 240, 255, 0.2) 0%, rgba(255, 255, 255, 0) 100%),linear-gradient(0deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8)),#1c1ce1;--eth-colors-upgradeStatusShippedBackground:linear-gradient(180deg, rgba(0, 240, 255, 0.2) 0%, rgba(255, 255, 255, 0) 100%),linear-gradient(0deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8)),#109e62;--eth-colors-upgradeStatusBorder:none;--eth-colors-upgradeStatusShippedBorder:none;--eth-colors-mainnet:#9fd8c0;--eth-colors-mainnetBorder:#7f7f7f;--eth-colors-beaconchain:#ccfcff;--eth-colors-beaconchainBorder:#7f7f7f;--eth-colors-shard:#ffe3d3;--eth-colors-shardBorder:#7f7f7f;--eth-colors-infoLink:#0b0b66;--eth-colors-infoLinkHover:#050532;--eth-colors-cardBoxShadow:4px 4px 0px 0px #d2d2f9;--eth-colors-homeBoxMint:#e1fefa;--eth-colors-homeBoxTurquoise:#ccfcff;--eth-colors-homeBoxOrange:#ffe3d3;--eth-colors-homeBoxPurple:#e8e8ff;--eth-colors-homeBoxPink:#ffe5f9;--eth-colors-codeBackground:#fafafa;--eth-colors-rollupDevDocList:#e8e8ff;--eth-colors-beta:radial-gradient(25.56% 133.51% at 28.36% 45.54%, rgba(28, 28, 225, 0) 0%, rgba(28, 28, 225, 0.06) 100%);--eth-colors-offBackground:#f7f7f7;--eth-colors-stakingPillPlatform:#cd9df3;--eth-colors-stakingPillUI:#ebd27a;--eth-colors-stakingGold:#be8d10;--eth-colors-stakingGoldFill:#fef9ef;--eth-colors-stakingGreen:#129e5b;--eth-colors-stakingGreenFill:#f7faf1;--eth-colors-stakingBlue:#0b83dc;--eth-colors-stakingBlueFill:#f1fcf5;--eth-colors-stakingRed:#a0524c;--eth-colors-stakingRedFill:#f8fbf9;--eth-colors-layer2Gradient:linear-gradient(85.12deg, rgba(185, 185, 241, 0.2) 0%, rgba(84, 132, 234, 0.2) 56.29%, rgba(58, 142, 137, 0.2) 99.99%);--eth-colors-feedbackGradient:linear-gradient(102.7deg, rgba(185, 185, 241, 0.2) 0%, rgba(84, 132, 234, 0.2) 51.56%, rgba(58, 142, 137, 0.2) 100%);--eth-colors-bannerGridGradient:linear-gradient(90deg, rgba(127,127,213,0.2) 0%, rgba(132,145,221,0.2) 50%, rgba(145,234,228,0.2) 100%);--eth-colors-sliderBg:#F7F7F7;--eth-colors-sliderBorder:#ECECEC;--eth-colors-sliderDot:#A4A4A4;--eth-colors-sliderDotActive:#1C1DFF;--eth-colors-sliderBtnBg:#A4A4A4;--eth-colors-sliderBtnColor:#ffffff;--eth-colors-sliderBtnBgDisabled:#E7E7E7;--eth-colors-sliderBtnColorDisabled:#737373;--eth-colors-primaryLight:var(--eth-colors-blue-100);--eth-colors-primaryDark:var(--eth-colors-blue-700);--eth-colors-primaryPressed:var(--eth-colors-blue-300);--eth-colors-body:var(--eth-colors-gray-700);--eth-colors-bodyInverted:var(--eth-colors-gray-100);--eth-colors-bodyLight:var(--eth-colors-gray-500);--eth-colors-disabled:var(--eth-colors-gray-400);--eth-colors-neutral:var(--eth-colors-white);--eth-colors-successNeutral:var(--eth-colors-green-100);--eth-colors-errorNeutral:var(--eth-colors-red-100);}.chakra-ui-dark :host:not([data-theme]),.chakra-ui-dark :root:not([data-theme]),.chakra-ui-dark [data-theme]:not([data-theme]),[data-theme=dark] :host:not([data-theme]),[data-theme=dark] :root:not([data-theme]),[data-theme=dark] [data-theme]:not([data-theme]),:host[data-theme=dark],:root[data-theme=dark],[data-theme][data-theme=dark]{--eth-colors-black:#000000;--eth-colors-white:#ffffff;--eth-colors-chakra-body-text:var(--eth-colors-whiteAlpha-900);--eth-colors-chakra-body-bg:var(--eth-colors-gray-800);--eth-colors-chakra-border-color:var(--eth-colors-whiteAlpha-300);--eth-colors-chakra-placeholder-color:var(--eth-colors-whiteAlpha-400);--eth-colors-white500:#ffffff;--eth-colors-white600:#f7f7f7;--eth-colors-white700:#e5e5e5;--eth-colors-white800:#ccc;--eth-colors-white900:#b2b2b2;--eth-colors-black500:#000000;--eth-colors-black400:#191919;--eth-colors-black300:#333;--eth-colors-black200:#4c4c4c;--eth-colors-black100:#666;--eth-colors-black50:#7f7f7f;--eth-colors-boxShadow:rgba(0,0,0,0.12);--eth-colors-boxShadowHover:rgba(0,0,0,0.24);--eth-colors-secondary:#b2b2b2;--eth-colors-success900:#031f13;--eth-colors-success800:#063f27;--eth-colors-success700:#095e3a;--eth-colors-success600:#0c7e4e;--eth-colors-success:var(--eth-colors-green-400);--eth-colors-success500:#109e62;--eth-colors-success400:#3fb181;--eth-colors-success300:#6fc4a0;--eth-colors-success200:#9fd8c0;--eth-colors-success100:#cfebdf;--eth-colors-fail900:#240000;--eth-colors-fail800:#490000;--eth-colors-fail700:#6e0000;--eth-colors-fail600:#930000;--eth-colors-fail:#b80000;--eth-colors-fail500:#b80000;--eth-colors-fail400:#c63333;--eth-colors-fail300:#d46666;--eth-colors-fail200:#e29999;--eth-colors-fail100:#f0cccc;--eth-colors-tagBlue:#d1d1ff;--eth-colors-tagOrange:#ffe3d3;--eth-colors-tagGreen:#cfebdf;--eth-colors-tagRed:#f0cccc;--eth-colors-tagTurquoise:#ccfcff;--eth-colors-tagGray:#e5e5e5;--eth-colors-tagYellow:#fff8df;--eth-colors-tagMint:#e1fefa;--eth-colors-tagPink:#ffe5f9;--eth-colors-warning:#ffe3d3;--eth-colors-warningLink:#994515;--eth-colors-warningLinkHover:#321607;--eth-colors-lowBug:#ffe3d3;--eth-colors-mediumBug:#ffab7b;--eth-colors-primaryLight300:#7676ff;--eth-colors-primaryDark300:#ffab7b;--eth-colors-yellow:#fff8df;--eth-colors-gridYellow:#ffe78e;--eth-colors-gridRed:#ef7d7d;--eth-colors-gridBlue:#a7d0f4;--eth-colors-gridGreen:#6fc4a0;--eth-colors-gridOrange:#ffab7b;--eth-colors-gridPink:#ffa1c3;--eth-colors-gridPurple:#a4a4ff;--eth-colors-infoBanner:#e8e8ff;--eth-colors-buttonColor:#333;--eth-colors-upgradesGradient:linear-gradient(285.24deg, #f7cbc0 0%, #fbeae3 17.81%, #f4b1ab 29.8%, #8476d9 49.78%, #8db4ff 69.77%);--eth-colors-runNodeGradient:linear-gradient(0deg, rgba(153, 157, 244, 0.35) 0%, rgba(153, 157, 244, 0) 100%),linear-gradient(89.24deg, rgba(253, 240, 255, 0.7) -64.3%, rgba(212, 119, 119, 0.390104) -7.43%, rgba(188, 163, 220, 0.207813) 46.66%, rgba(196, 196, 196, 0) 99.16%);--eth-colors-runNodeGradient2:linear-gradient(135deg, rgba(79, 113, 235, 0.2) 9.8%, rgba(232, 79, 235, 0.2) 92.84%);--eth-colors-ghostCardBackground:#333;--eth-colors-ghostCardGhost:#7f7f7f;--eth-colors-secondaryButtonBackgroundActive:#333;--eth-colors-primary:var(--eth-colors-orange-500);--eth-colors-primary950:#190b03;--eth-colors-primary900:#321607;--eth-colors-primary800:#662e0e;--eth-colors-primary700:#994515;--eth-colors-primary600:#cc5c1c;--eth-colors-primary500:#ff7324;--eth-colors-primary400:#ff8f4f;--eth-colors-primary300:#ffab7b;--eth-colors-primary200:#ffc7a7;--eth-colors-primary100:#ffe3d3;--eth-colors-primaryHover:var(--eth-colors-orange-300);--eth-colors-primaryActive:#ffc7a7;--eth-colors-lightBorder:#404040;--eth-colors-priceCardBackgroundPositive:var(--eth-colors-transparent);--eth-colors-priceCardBackgroundNegative:var(--eth-colors-transparent);--eth-colors-priceCardBorder:#095e3a;--eth-colors-priceCardBorderNegative:#d46666;--eth-colors-searchBorder:#b2b2b2;--eth-colors-searchBackground:#4c4c4c;--eth-colors-searchBackgroundEmpty:#333333;--eth-colors-searchResultText:#f1f3f5;--eth-colors-searchResultBackground:#33363d;--eth-colors-selectHover:#994515;--eth-colors-selectActive:#cc5c1c;--eth-colors-dropdownBackground:#191919;--eth-colors-dropdownBackgroundHover:#000000;--eth-colors-dropdownBorder:#333333;--eth-colors-markBackground:rgb(255, 115, 36, .1);--eth-colors-markUnderline:rgb(255, 115, 36, .5);--eth-colors-modalBackground:rgba(25,25,25,0.8);--eth-colors-text:#f2f2f2;--eth-colors-text200:#b2b2b2;--eth-colors-text300:#cccccc;--eth-colors-textTableOfContents:hsla(0,0%,69.8%,.8);--eth-colors-background:var(--eth-colors-gray-700);--eth-colors-ednBackground:#191919;--eth-colors-layer2ContentSecondary:#333;--eth-colors-border:#333;--eth-colors-tableBoxShadow:0 14px 66px hsla(0,0%,96.1%,.07),0 10px 17px hsla(0,0%,96.1%,.03),0 4px 7px hsla(0,0%,96.1%,.05);--eth-colors-tableItemBoxShadow:hsla(0,0%,100%,.1);--eth-colors-tableBackgroundHover:rgba(255,115,36,.013);--eth-colors-preBackground:#191919;--eth-colors-preBorder:hsla(0,0%,100%,.05);--eth-colors-homeDivider:#ffc7a7;--eth-colors-displayDark:block;--eth-colors-displayLight:none;--eth-colors-grayBackground:#272627;--eth-colors-cardGradient:linear-gradient(49.21deg, rgba(127, 127, 213, 0.2) 19.87%, rgba(134, 168, 231, 0.2) 58.46%, rgba(145, 234, 228, 0.2) 97.05% );--eth-colors-upgradeStatusBackground:#222222;--eth-colors-upgradeStatusShippedBackground:#222222;--eth-colors-upgradeStatusBorder:#a4a4ff solid 2px;--eth-colors-upgradeStatusShippedBorder:#3fb181 solid 2px;--eth-colors-mainnet:#222222;--eth-colors-mainnetBorder:#6fc4a0;--eth-colors-beaconchain:#222222;--eth-colors-beaconchainBorder:#ffe5f9;--eth-colors-shard:#222222;--eth-colors-shardBorder:#ff7324;--eth-colors-infoLink:#0b0b66;--eth-colors-infoLinkHover:#050532;--eth-colors-cardBoxShadow:4px 4px 0px 0px #ffab7c;--eth-colors-homeBoxMint:#2d3332;--eth-colors-homeBoxTurquoise:#293233;--eth-colors-homeBoxOrange:#332821;--eth-colors-homeBoxPurple:#212131;--eth-colors-homeBoxPink:#332027;--eth-colors-codeBackground:#2a2734;--eth-colors-rollupDevDocList:#4c4c4c;--eth-colors-beta:background:radial-gradient(25.56% 133.51% at 28.36% 45.54%, rgba(255, 143, 80, 0.72) 0%, rgba(255, 143, 80, 0.22) 100%);--eth-colors-offBackground:#181818;--eth-colors-stakingPillPlatform:#cd9df3;--eth-colors-stakingPillUI:#ebd27a;--eth-colors-stakingGold:#F2BB2F;--eth-colors-stakingGoldFill:#373228;--eth-colors-stakingGreen:#49DE96;--eth-colors-stakingGreenFill:#30342b;--eth-colors-stakingBlue:#A9D3F2;--eth-colors-stakingBlueFill:#2b352f;--eth-colors-stakingRed:#D6BBB9;--eth-colors-stakingRedFill:#313432;--eth-colors-layer2Gradient:linear-gradient(83.46deg, rgba(127, 127, 213, 0.2) 7.03%, rgba(138, 168, 231, 0.2) 52.42%, rgba(145, 234, 228, 0.2) 98.77%),#1E1E1E;--eth-colors-feedbackGradient:linear-gradient(83.46deg, #2C2C32 7.03%, #44404D 52.42%, #303038 98.77%);--eth-colors-bannerGridGradient:linear-gradient(90deg, rgba(172, 182, 229, 0.08) 0%, rgba(134, 253, 232, 0.08) 100%);--eth-colors-sliderBg:#191919;--eth-colors-sliderBorder:#404040;--eth-colors-sliderDot:#A4A4A4;--eth-colors-sliderDotActive:#FF7324;--eth-colors-sliderBtnBg:#404040;--eth-colors-sliderBtnColor:#ffffff;--eth-colors-sliderBtnBgDisabled:#404040;--eth-colors-sliderBtnColorDisabled:#737373;--eth-colors-primaryLight:var(--eth-colors-orange-100);--eth-colors-primaryDark:var(--eth-colors-orange-800);--eth-colors-primaryPressed:var(--eth-colors-orange-800);--eth-colors-body:var(--eth-colors-gray-100);--eth-colors-bodyInverted:var(--eth-colors-gray-700);--eth-colors-bodyLight:var(--eth-colors-gray-100);--eth-colors-disabled:var(--eth-colors-gray-500);--eth-colors-neutral:var(--eth-colors-gray-900);--eth-colors-successNeutral:var(--eth-colors-green-900);--eth-colors-errorNeutral:var(--eth-colors-red-900);}</style><style data-emotion="css-global 1orvvh0">html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;touch-action:manipulation;}body{position:relative;min-height:100%;font-feature-settings:'kern';}*,*::before,*::after{border-width:0;border-style:solid;box-sizing:border-box;}main{display:block;}hr{border-top-width:1px;box-sizing:content-box;height:0;overflow:visible;}pre,code,kbd,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:1em;}a{background-color:transparent;color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bold;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none!important;}input[type="number"]{-moz-appearance:textfield;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none!important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}template{display:none;}[hidden]{display:none!important;}body,blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}ol,ul{margin:0;padding:0;}textarea{resize:vertical;}button,[role="button"]{cursor:pointer;}button::-moz-focus-inner{border:0!important;}table{border-collapse:collapse;}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;}img,svg,video,canvas,audio,iframe,embed,object{display:block;}img,video{max-width:100%;height:auto;}[data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]){outline:none;box-shadow:none;}select::-ms-expand{display:none;}</style><style data-emotion="css-global 14uia5a">body{font-family:var(--eth-fonts-body);color:var(--eth-colors-chakra-body-text);background:var(--eth-colors-white);transition-property:background-color;transition-duration:var(--eth-transition-duration-normal);line-height:1.6rem;}*::-webkit-input-placeholder{color:var(--eth-colors-chakra-placeholder-color);}*::-moz-placeholder{color:var(--eth-colors-chakra-placeholder-color);}*:-ms-input-placeholder{color:var(--eth-colors-chakra-placeholder-color);}*::placeholder{color:var(--eth-colors-chakra-placeholder-color);}*,*::before,::after{border-color:var(--eth-colors-chakra-border-color);word-wrap:break-word;}a{color:var(--eth-colors-primary);-webkit-text-decoration:underline;text-decoration:underline;}p{margin:0px 0px 1.45rem;}ul,ol{margin:0px 0px 1.45rem 1.45rem;padding:0px;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li>ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li>ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li>p{margin-bottom:calc(1.45rem / 2);}h1,h2,h3,h4,h5,h6{margin:2rem 0;line-height:1.4;scroll-margin-top:navHeight;scroll-snap-margin:navHeight;}h1{font-size:3rem;font-weight:700;}@media (max-width: 768px){h1{font-size:2.5rem;}}h2{font-size:2rem;margin-top:3rem;font-weight:600;}@media (max-width: 768px){h2{font-size:1.5rem;}}h3{font-size:1.5rem;margin-top:2.5rem;font-weight:600;}@media (max-width: 768px){h3{font-size:1.25rem;}}h4{font-size:1.25rem;font-weight:500;}@media (max-width: 768px){h4{font-size:1rem;}}h5{font-size:1rem;font-weight:450;}h6{font-size:0.9rem;font-weight:400;text-transform:uppercase;}.header-anchor{position:relative!important;display:initial;margin-left:-1.5em;padding-right:0.5rem!important;font-size:1rem;vertical-align:middle;}.header-anchor svg{display:inline;fill:var(--eth-colors-primary);visibility:hidden;}h1:hover .header-anchor svg,h2:hover .header-anchor svg,h3:hover .header-anchor svg,h4:hover .header-anchor svg,h5:hover .header-anchor svg,h6:hover .header-anchor svg{visibility:visible;}.header-anchor:focus svg{visibility:visible;}pre,code,kbd,samp{font-size:0.8em;line-height:1.1rem;font-family:SFMono-Regular,Menlo,Monaco,Consolas,monospace;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css wx9y6b">.css-wx9y6b{background:var(--eth-colors-primary);}</style><div class="css-wx9y6b"><style data-emotion="css bhrhsc">.css-bhrhsc{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-background);line-height:var(--eth-lineHeights-taller);position:absolute;top:calc(var(--eth-space-12) * -1);margin-left:var(--eth-space-2);text-decoration-line:none;}.css-bhrhsc:hover,.css-bhrhsc[data-hover]{-webkit-text-decoration:none;text-decoration:none;}.css-bhrhsc:focus-visible,.css-bhrhsc[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-bhrhsc:focus,.css-bhrhsc[data-focus]{position:static;}</style><a class="chakra-link css-bhrhsc" href="#main-content" dir="ltr"><span>Skip to main content</span></a></div><style data-emotion="css 15v8lwp">.css-15v8lwp{display:none;bottom:0px;right:0px;position:fixed;z-index:99;}@media screen and (min-width: 48em){.css-15v8lwp{bottom:var(--eth-space-8);right:var(--eth-space-8);}}</style><div class="css-15v8lwp"><style data-emotion="css fu49g5">.css-fu49g5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:1rem;max-height:100%;max-width:100%;background:var(--eth-colors-infoBanner);color:var(--eth-colors-black300);box-shadow:0px -4px 10px 0px var(--eth-colors-text) 10%;border-radius:var(--eth-radii-sm);}@media screen and (min-width: 48em){.css-fu49g5{max-width:600px;box-shadow:rgba(0, 0, 0, 0.16) 0px 2px 4px 0px;}}</style><div class="css-fu49g5"><style data-emotion="css gt5kt">.css-gt5kt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin:var(--eth-space-4);margin-top:var(--eth-space-10);}@media screen and (min-width: 30em){.css-gt5kt{margin-top:var(--eth-space-4);}}</style><div class="css-gt5kt"><style data-emotion="css 1nl6ywf">.css-1nl6ywf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;--chakra-space-y-reverse:1;--chakra-divide-y-reverse:1;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin-bottom:var(--eth-space-4);}@media screen and (min-width: 30em){.css-1nl6ywf{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}</style><div class="css-1nl6ywf"><style data-emotion="css uwfept">.css-uwfept{font-family:var(--eth-fonts-heading);font-weight:700;font-size:var(--eth-fontSizes-2xl);line-height:100%;margin-top:0px;margin-bottom:0px;}</style><h3 class="chakra-heading css-uwfept"><span>Help update this page</span></h3><style data-emotion="css 12a5q66">.css-12a5q66{display:inline-block;font-size:var(--eth-fontSizes-2xl);margin-left:var(--eth-space-2);margin-bottom:var(--eth-space-4);}.css-12a5q66>img{margin:0!important;display:initial;}@media screen and (min-width: 30em){.css-12a5q66{margin-bottom:auto;}}</style><span class="css-12a5q66 undefined"><img alt="🌏" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f30f.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span></div><p><span>There’s a new version of this page but it’s only in English right now. Help us translate the latest version.</span></p><style data-emotion="css p189a6">.css-p189a6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}@media screen and (min-width: 30em){.css-p189a6{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}</style><div class="css-p189a6"><div class="css-0"><style data-emotion="css 1d355xp">.css-1d355xp{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);background:var(--eth-colors-primary);color:var(--eth-colors-buttonColor);border:0;-webkit-text-decoration:none;text-decoration:none;}.css-1d355xp:focus-visible,.css-1d355xp[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-1d355xp[disabled],.css-1d355xp[aria-disabled=true],.css-1d355xp[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);background:var(--eth-colors-disabled);}.css-1d355xp:hover,.css-1d355xp[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-primary);background:var(--eth-colors-primary);opacity:0.8;}.css-1d355xp:hover[disabled],.css-1d355xp[data-hover][disabled],.css-1d355xp:hover[aria-disabled=true],.css-1d355xp[data-hover][aria-disabled=true],.css-1d355xp:hover[data-disabled],.css-1d355xp[data-hover][data-disabled]{background:var(--eth-colors-disabled);box-shadow:var(--eth-shadows-none);opacity:1;}.css-1d355xp:focus,.css-1d355xp[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;}.css-1d355xp:active,.css-1d355xp[data-active]{background:var(--eth-colors-primaryHover);}</style><style data-emotion="css lqirji">.css-lqirji{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);white-space:normal;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);background:var(--eth-colors-primary);color:var(--eth-colors-buttonColor);border:0;-webkit-text-decoration:none;text-decoration:none;}.css-lqirji:hover,.css-lqirji[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-lqirji:focus-visible,.css-lqirji[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-lqirji:focus,.css-lqirji[data-focus]{box-shadow:var(--eth-shadows-none);}.css-lqirji:focus-visible,.css-lqirji[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-lqirji[disabled],.css-lqirji[aria-disabled=true],.css-lqirji[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);background:var(--eth-colors-disabled);}.css-lqirji:hover,.css-lqirji[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-primary);background:var(--eth-colors-primary);opacity:0.8;}.css-lqirji:hover[disabled],.css-lqirji[data-hover][disabled],.css-lqirji:hover[aria-disabled=true],.css-lqirji[data-hover][aria-disabled=true],.css-lqirji:hover[data-disabled],.css-lqirji[data-hover][data-disabled]{background:var(--eth-colors-disabled);box-shadow:var(--eth-shadows-none);opacity:1;}.css-lqirji:focus,.css-lqirji[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;}.css-lqirji:active,.css-lqirji[data-active]{background:var(--eth-colors-primaryHover);}</style><a class="chakra-link chakra-button css-lqirji" dir="ltr" href="/en/contributing/translation-program/"><span>Translate page</span></a></div><div class="css-0"><style data-emotion="css 1ukzpwq">.css-1ukzpwq{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);border:var(--eth-borders-1px);border-color:#333333;color:#333333;background:var(--eth-colors-transparent);-webkit-text-decoration:none;text-decoration:none;margin-left:0px;margin-top:var(--eth-space-2);}.css-1ukzpwq:focus-visible,.css-1ukzpwq[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-1ukzpwq[disabled],.css-1ukzpwq[aria-disabled=true],.css-1ukzpwq[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);}.css-1ukzpwq:hover,.css-1ukzpwq[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-primary);background:var(--eth-colors-background);color:var(--eth-colors-primary);border-color:var(--eth-colors-primary);}.css-1ukzpwq:hover[disabled],.css-1ukzpwq[data-hover][disabled],.css-1ukzpwq:hover[aria-disabled=true],.css-1ukzpwq[data-hover][aria-disabled=true],.css-1ukzpwq:hover[data-disabled],.css-1ukzpwq[data-hover][data-disabled]{background:initial;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.css-1ukzpwq:focus,.css-1ukzpwq[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);border-color:var(--eth-colors-background);}.css-1ukzpwq:focus[disabled],.css-1ukzpwq[data-focus][disabled],.css-1ukzpwq:focus[aria-disabled=true],.css-1ukzpwq[data-focus][aria-disabled=true],.css-1ukzpwq:focus[data-disabled],.css-1ukzpwq[data-focus][data-disabled]{color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.chakra-button__group[data-attached]>.css-1ukzpwq:not(:last-of-type){-webkit-margin-end:-1px;margin-inline-end:-1px;}.css-1ukzpwq:active,.css-1ukzpwq[data-active]{background:var(--eth-colors-primaryLight);color:var(--eth-colors-primary);border-color:var(--eth-colors-primary);}@media screen and (min-width: 30em){.css-1ukzpwq{margin-left:var(--eth-space-2);margin-top:0px;}}</style><style data-emotion="css 1qhlz83">.css-1qhlz83{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);white-space:normal;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);border:var(--eth-borders-1px);border-color:#333333;color:#333333;background:var(--eth-colors-transparent);-webkit-text-decoration:none;text-decoration:none;margin-left:0px;margin-top:var(--eth-space-2);}.css-1qhlz83:hover,.css-1qhlz83[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1qhlz83:focus-visible,.css-1qhlz83[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1qhlz83:focus,.css-1qhlz83[data-focus]{box-shadow:var(--eth-shadows-none);}.css-1qhlz83:focus-visible,.css-1qhlz83[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-1qhlz83[disabled],.css-1qhlz83[aria-disabled=true],.css-1qhlz83[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);}.css-1qhlz83:hover,.css-1qhlz83[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-primary);background:var(--eth-colors-background);color:var(--eth-colors-primary);border-color:var(--eth-colors-primary);}.css-1qhlz83:hover[disabled],.css-1qhlz83[data-hover][disabled],.css-1qhlz83:hover[aria-disabled=true],.css-1qhlz83[data-hover][aria-disabled=true],.css-1qhlz83:hover[data-disabled],.css-1qhlz83[data-hover][data-disabled]{background:initial;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.css-1qhlz83:focus,.css-1qhlz83[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);border-color:var(--eth-colors-background);}.css-1qhlz83:focus[disabled],.css-1qhlz83[data-focus][disabled],.css-1qhlz83:focus[aria-disabled=true],.css-1qhlz83[data-focus][aria-disabled=true],.css-1qhlz83:focus[data-disabled],.css-1qhlz83[data-focus][data-disabled]{color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.chakra-button__group[data-attached]>.css-1qhlz83:not(:last-of-type){-webkit-margin-end:-1px;margin-inline-end:-1px;}.css-1qhlz83:active,.css-1qhlz83[data-active]{background:var(--eth-colors-primaryLight);color:var(--eth-colors-primary);border-color:var(--eth-colors-primary);}@media screen and (min-width: 30em){.css-1qhlz83{margin-left:var(--eth-space-2);margin-top:0px;}}</style><a aria-current="page" class="chakra-link chakra-button css-1qhlz83" dir="ltr" href="/en/developers/tutorials/optimism-std-bridge-annotated-code/"><span>See English</span></a></div></div></div><style data-emotion="css 1ahfk4s">.css-1ahfk4s{outline:2px solid transparent;outline-offset:2px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:var(--close-button-size);height:var(--close-button-size);border-radius:var(--eth-radii-md);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);--close-button-size:32px;font-size:12px;position:absolute;top:0px;right:0px;margin:var(--eth-space-2);color:var(--eth-colors-secondary);}.css-1ahfk4s[disabled],.css-1ahfk4s[aria-disabled=true],.css-1ahfk4s[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--eth-shadows-none);}.css-1ahfk4s:hover,.css-1ahfk4s[data-hover]{color:var(--eth-colors-primary);}.css-1ahfk4s:active,.css-1ahfk4s[data-active]{background:var(--eth-colors-blackAlpha-200);}.css-1ahfk4s:focus-visible,.css-1ahfk4s[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}</style><button type="button" aria-label="Close" class="css-1ahfk4s"><style data-emotion="css onkibi">.css-onkibi{width:1em;height:1em;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;vertical-align:middle;}</style><svg viewBox="0 0 24 24" focusable="false" class="chakra-icon css-onkibi" aria-hidden="true"><path fill="currentColor" d="M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"></path></svg></button></div></div><style data-emotion="css nzctt2">.css-nzctt2{position:fixed;display:none;bottom:0px;right:0px;z-index:99;}@media screen and (min-width: 48em){.css-nzctt2{bottom:var(--eth-space-8);right:var(--eth-space-8);}}</style><div class="css-nzctt2"><style data-emotion="css 18ofr9p">.css-18ofr9p{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;background:var(--eth-colors-infoBanner);color:var(--eth-colors-black300);max-width:var(--eth-sizes-full);max-height:var(--eth-sizes-full);padding:var(--eth-space-4);border-radius:var(--eth-radii-sm);box-shadow:-4px 10px 0px var(--eth-colors-text) 10%;}@media screen and (min-width: 48em){.css-18ofr9p{max-width:600px;box-shadow:rgba(0, 0, 0, 0.16) 0px 2px 4px 0px;}}</style><div class="css-18ofr9p"><style data-emotion="css gt5kt">.css-gt5kt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin:var(--eth-space-4);margin-top:var(--eth-space-10);}@media screen and (min-width: 30em){.css-gt5kt{margin-top:var(--eth-space-4);}}</style><div class="css-gt5kt"><style data-emotion="css 1nl6ywf">.css-1nl6ywf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;--chakra-space-y-reverse:1;--chakra-divide-y-reverse:1;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin-bottom:var(--eth-space-4);}@media screen and (min-width: 30em){.css-1nl6ywf{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}</style><div class="css-1nl6ywf"><style data-emotion="css 1dztc9g">.css-1dztc9g{font-family:var(--eth-fonts-heading);font-weight:var(--eth-fontWeights-bold);font-size:1.25rem;line-height:100%;margin-top:0px;margin-bottom:0px;}@media screen and (min-width: 48em){.css-1dztc9g{font-size:1.5rem;}}</style><h3 class="chakra-heading css-1dztc9g"><span>No bugs here!</span><style data-emotion="css ofnprv">.css-ofnprv{display:inline-block;font-size:var(--eth-fontSizes-3xl);padding-top:var(--eth-space-2);margin-left:var(--eth-space-2);margin-bottom:var(--eth-space-4);}.css-ofnprv>img{margin:0!important;display:initial;}@media screen and (min-width: 30em){.css-ofnprv{margin-bottom:auto;}}</style><span class="css-ofnprv undefined"><img alt="🐛" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f41b.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span></h3></div><p class="chakra-text css-0"><span>This page is not being translated. We've intentionally left this page in English for now.</span></p><style data-emotion="css p189a6">.css-p189a6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}@media screen and (min-width: 30em){.css-p189a6{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}</style><div class="css-p189a6"><style data-emotion="css zgr6oy">.css-zgr6oy{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);background:var(--eth-colors-primary);color:var(--eth-colors-buttonColor);border:0;}.css-zgr6oy:focus-visible,.css-zgr6oy[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-zgr6oy[disabled],.css-zgr6oy[aria-disabled=true],.css-zgr6oy[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);background:var(--eth-colors-disabled);}.css-zgr6oy:hover,.css-zgr6oy[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-primary);background:var(--eth-colors-primary);opacity:0.8;}.css-zgr6oy:hover[disabled],.css-zgr6oy[data-hover][disabled],.css-zgr6oy:hover[aria-disabled=true],.css-zgr6oy[data-hover][aria-disabled=true],.css-zgr6oy:hover[data-disabled],.css-zgr6oy[data-hover][data-disabled]{background:var(--eth-colors-disabled);box-shadow:var(--eth-shadows-none);opacity:1;}.css-zgr6oy:focus,.css-zgr6oy[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;}.css-zgr6oy:active,.css-zgr6oy[data-active]{background:var(--eth-colors-primaryHover);}</style><button type="button" class="chakra-button css-zgr6oy"><span>Don't show again</span></button></div></div><style data-emotion="css 2nuphn">.css-2nuphn{outline:2px solid transparent;outline-offset:2px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:var(--close-button-size);height:var(--close-button-size);border-radius:var(--eth-radii-md);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);--close-button-size:32px;font-size:12px;position:absolute;top:0px;right:0px;margin:var(--eth-space-4);color:var(--eth-colors-secondary);}.css-2nuphn[disabled],.css-2nuphn[aria-disabled=true],.css-2nuphn[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--eth-shadows-none);}.css-2nuphn:hover,.css-2nuphn[data-hover]{color:var(--eth-colors-primary);}.css-2nuphn:active,.css-2nuphn[data-active]{background:var(--eth-colors-blackAlpha-200);}.css-2nuphn:focus-visible,.css-2nuphn[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}</style><button type="button" aria-label="Close" class="css-2nuphn"><style data-emotion="css onkibi">.css-onkibi{width:1em;height:1em;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;vertical-align:middle;}</style><svg viewBox="0 0 24 24" focusable="false" class="chakra-icon css-onkibi" aria-hidden="true"><path fill="currentColor" d="M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"></path></svg></button></div></div><style data-emotion="css 10fath6">.css-10fath6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;margin:0px auto;min-height:100vh;-webkit-box-flex-flow:column;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}@media screen and (min-width: 62em){.css-10fath6{max-width:1504px;}}</style><div class="css-10fath6"><style data-emotion="css 1rzl5xx">.css-1rzl5xx{position:-webkit-sticky;position:sticky;top:0;z-index:1000;width:100%;}</style><div class="css-1rzl5xx e1p6yfdy8"><style data-emotion="css 1lfigb">.css-1lfigb{height:4.75rem;padding:1rem 2rem;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;background-color:#ffffff;border-bottom:1px solid rgba(0, 0, 0, 0.1);}</style><nav aria-label="Primary" class="css-1lfigb e1p6yfdy7"><style data-emotion="css q5uto4">.css-q5uto4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;max-width:1440px;}@media (max-width: 1024px){.css-q5uto4{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}}</style><div class="css-q5uto4 e1p6yfdy5"><style data-emotion="css yd5a75">.css-yd5a75{-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion="css h8lqpv">.css-h8lqpv{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);white-space:normal;-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-h8lqpv:hover,.css-h8lqpv[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-h8lqpv:focus-visible,.css-h8lqpv[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-h8lqpv:focus,.css-h8lqpv[data-focus]{box-shadow:var(--eth-shadows-none);}</style><a class="chakra-link e1p6yfdy1 css-h8lqpv" dir="ltr" aria-label="Home" style="color:#1c1cff" href="/en/"><style data-emotion="css r3s5zw">.css-r3s5zw{opacity:0.85;}.css-r3s5zw:hover{opacity:1;}</style><style data-emotion="css 1jqz8gn">.css-1jqz8gn{width:22px;height:35px;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;vertical-align:middle;opacity:0.85;}.css-1jqz8gn:hover{opacity:1;}</style><svg viewBox="0 0 115 182" focusable="false" class="chakra-icon e1p6yfdy0 css-1jqz8gn"><path d="M57.5054 181V135.84L1.64064 103.171L57.5054 181Z" fill="#F0CDC2" stroke="#1616B4" stroke-linejoin="round"></path><path d="M57.6906 181V135.84L113.555 103.171L57.6906 181Z" fill="#C9B3F5" stroke="#1616B4" stroke-linejoin="round"></path><path d="M57.5055 124.615V66.9786L1 92.2811L57.5055 124.615Z" fill="#88AAF1" stroke="#1616B4" stroke-linejoin="round"></path><path d="M57.6903 124.615V66.9786L114.196 92.2811L57.6903 124.615Z" fill="#C9B3F5" stroke="#1616B4" stroke-linejoin="round"></path><path d="M1.00006 92.2811L57.5054 1V66.9786L1.00006 92.2811Z" fill="#F0CDC2" stroke="#1616B4" stroke-linejoin="round"></path><path d="M114.196 92.2811L57.6906 1V66.9786L114.196 92.2811Z" fill="#B8FAF6" stroke="#1616B4" stroke-linejoin="round"></path></svg></a><style data-emotion="css 1gdkg6e">.css-1gdkg6e{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;}@media (max-width: 1024px){.css-1gdkg6e{display:none;}}</style><div class="css-1gdkg6e e1p6yfdy4"><style data-emotion="css jniy3o">.css-jniy3o{margin:0;margin-left:2rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;list-style-type:none;list-style-image:none;}</style><ul class="css-jniy3o e1p6yfdy3"><style data-emotion="css s1w03o">.css-s1w03o{white-space:nowrap;margin:0;color:#333333;}.css-s1w03o:hover{color:#1c1cff;}</style><li aria-label="Use Ethereum menu" class="css-s1w03o e1oznup73"><style data-emotion="css 14sdthb">.css-14sdthb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding-top:0.5rem;padding-bottom:0.5rem;margin-right:1.5rem;}.css-14sdthb:hover>svg{fill:#1c1cff;}</style><span dir="ltr" tabindex="0" role="button" aria-expanded="false" class="css-14sdthb e1oznup75"><span>Use Ethereum</span><style data-emotion="css 2nxmhn">.css-2nxmhn{fill:#b2b2b2;}.css-2nxmhn:hover svg{fill:#1c1cff;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-2nxmhn e1oznup76" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></span><style data-emotion="css 10vwoqs">.css-10vwoqs{margin:0;position:absolute;margin-top:-1rem;list-style-type:none;list-style-image:none;top:100%;width:auto;border-radius:0.5em;background:#ffffff;border:1px solid #e5e5e5;padding:1rem 0;}</style><ul class="css-10vwoqs e1oznup74" style="opacity:0;display:none;transform:rotateX(-15deg) translateZ(0)"><style data-emotion="css h9rgb6">.css-h9rgb6{margin:0;color:#333333;}.css-h9rgb6:hover{color:#1c1cff;background:#f2f2f2;}</style><li class="css-h9rgb6 e1oznup72"><style data-emotion="css 1wmssx1">.css-1wmssx1{-webkit-text-decoration:none;text-decoration:none;display:block;padding:0.5rem 1rem;color:#666666;}.css-1wmssx1 svg{fill:#666666;}.css-1wmssx1:hover{-webkit-text-decoration:none;text-decoration:none;color:#1c1cff;}.css-1wmssx1:hover svg{fill:#1c1cff;}</style><style data-emotion="css 1vyy6tq">.css-1vyy6tq{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);white-space:normal;-webkit-text-decoration:none;text-decoration:none;display:block;padding:0.5rem 1rem;color:#666666;}.css-1vyy6tq:hover,.css-1vyy6tq[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1vyy6tq:focus-visible,.css-1vyy6tq[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1vyy6tq:focus,.css-1vyy6tq[data-focus]{box-shadow:var(--eth-shadows-none);}.css-1vyy6tq svg{fill:#666666;}.css-1vyy6tq:hover{-webkit-text-decoration:none;text-decoration:none;color:#1c1cff;}.css-1vyy6tq:hover svg{fill:#1c1cff;}</style><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/wallets/find-wallet/"><span>Find wallet</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/get-eth/"><span>Get ETH</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/dapps/"><span>Decentralized applications (dapps)</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/layer-2/"><span>Layer 2</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/nft/"><span>Non-fungible tokens (NFTs)</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/defi/"><span>Decentralized finance (DeFi)</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/dao/"><span>Decentralized autonomous organisations (DAOs)</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/stablecoins/"><span>Stablecoins</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/staking/"><span>Stake ETH</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/run-a-node/"><span>Run a node</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/social-networks/"><span>Decentralized social networks</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/decentralized-identity/"><span>Decentralized identity</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/desci/"><span>Decentralized science (DeSci)</span></a></li></ul></li><li aria-label="Learn menu" class="css-s1w03o e1oznup73"><span dir="ltr" tabindex="0" role="button" aria-expanded="false" class="css-14sdthb e1oznup75"><span>Learn</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-2nxmhn e1oznup76" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></span><ul class="css-10vwoqs e1oznup74" style="opacity:0;display:none;transform:rotateX(-15deg) translateZ(0)"><style data-emotion="css 1xhj18k">.css-1xhj18k{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}</style><div dir="ltr" class="css-1xhj18k e16ws1vv0"><div><style data-emotion="css 1nxebte">.css-1nxebte{font-style:normal;font-weight:normal;font-size:1.3rem;margin-top:1rem;margin-bottom:0.5rem;padding:0 1rem;color:#333333;}.css-1nxebte:first-child{margin-top:0;}</style><h2 class="css-1nxebte e1oznup70">Start here</h2><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/learn/"><span>Learn Hub</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/guides/"><span>Guides hub</span></a></li><h2 class="css-1nxebte e1oznup70">Ethereum basics</h2><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/what-is-ethereum/"><span>What is Ethereum?</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/eth/"><span>What is ether (ETH)?</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/wallets/"><span>Ethereum wallets</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/security/"><span>Ethereum security and scam prevention</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/web3/"><span>What is Web3?</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/smart-contracts/"><span>Smart contracts</span></a></li></div><div><h2 class="css-1nxebte e1oznup70">Ethereum protocol</h2><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/energy-consumption/"><span>Ethereum energy consumption</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/upgrades/"><span>Ethereum upgrades</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/eips/"><span>Ethereum Improvement Proposals</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/history/"><span>History of Ethereum</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/whitepaper/"><span>Ethereum Whitepaper</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/glossary/"><span>Ethereum glossary</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/governance/"><span>Ethereum governance</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/bridges/"><span>Blockchain bridges</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/zero-knowledge-proofs/"><span>Zero-knowledge proofs</span></a></li></div></div></ul></li><li aria-label="Developers&#x27; Menu" class="css-s1w03o e1oznup73"><span dir="ltr" tabindex="0" role="button" aria-expanded="false" class="css-14sdthb e1oznup75"><span>Developers</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-2nxmhn e1oznup76" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></span><ul class="css-10vwoqs e1oznup74" style="opacity:0;display:none;transform:rotateX(-15deg) translateZ(0)"><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/developers/"><span>Developers' home</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/developers/docs/"><span>Documentation</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/developers/tutorials/"><span>Tutorials</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/developers/learning-tools/"><span>Learn by coding</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/developers/local-environment/"><span>Set up local environment</span></a></li></ul></li><li aria-label="Enterprise Menu" class="css-s1w03o e1oznup73"><span dir="ltr" tabindex="0" role="button" aria-expanded="false" class="css-14sdthb e1oznup75"><span>Enterprise</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-2nxmhn e1oznup76" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></span><ul class="css-10vwoqs e1oznup74" style="opacity:0;display:none;transform:rotateX(-15deg) translateZ(0)"><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/enterprise/"><span>Mainnet Ethereum</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/enterprise/private-ethereum/"><span>Private Ethereum</span></a></li></ul></li><li aria-label="Community Menu" class="css-s1w03o e1oznup73"><span dir="ltr" tabindex="0" role="button" aria-expanded="false" class="css-14sdthb e1oznup75"><span>Community</span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-2nxmhn e1oznup76" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></span><ul class="css-10vwoqs e1oznup74" style="opacity:0;display:none;transform:rotateX(-15deg) translateZ(0)"><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/community/"><span>Community hub</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/community/online/"><span>Online communities</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/community/events/"><span>Ethereum events</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/community/get-involved/"><span>Get involved</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/community/research/"><span>Open research</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/community/grants/"><span>Grants</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/community/support/"><span>Ethereum support</span></a></li><li class="css-h9rgb6 e1oznup72"><a class="chakra-link e1oznup71 css-1vyy6tq" dir="ltr" href="/en/community/language-resources/"><span>Language resources</span></a></li></ul></li></ul><style data-emotion="css 1qu7abv">.css-1qu7abv{margin:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:0.5rem;}</style><div class="css-1qu7abv e1p6yfdy2"><style data-emotion="css 1s445dq">.css-1s445dq{position:relative;display:grid;grid-gap:1em;}</style><div class="css-1s445dq e1unpkuh4"><style data-emotion="css 1m90wsh">.css-1m90wsh{margin:0;position:relative;border-radius:0.25em;}</style><form class="css-1m90wsh ebbqnls3"><style data-emotion="css 1w9oosq">.css-1w9oosq{border:1px solid #7f7f7f;color:#333333;background:#ffffff;padding:0.5rem;padding-right:2rem;border-radius:0.25em;width:100%;}.css-1w9oosq:focus{outline:#1c1cff auto 1px;}@media only screen and (min-width: 1024px){.css-1w9oosq{padding-left:2rem;}}</style><input type="text" placeholder="Search" aria-label="Search" class="css-1w9oosq ebbqnls2" value=""/><style data-emotion="css 209ue6">.css-209ue6{border:1px solid #7f7f7f;border-radius:0.25em;color:#333333;display:none;margin-bottom:0;padding:0 6px;position:absolute;right:6px;top:20%;}@media only screen and (min-width: 1024px){.css-209ue6{display:inline-block;}}</style><p class="css-209ue6 ebbqnls0">/</p><style data-emotion="css vw4xmf">.css-vw4xmf{fill:#b2b2b2;position:absolute;right:6px;top:50%;margin-top:-12px;}.css-vw4xmf:hover svg{fill:#1c1cff;}@media only screen and (min-width: 1024px){.css-vw4xmf{left:6px;}}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-vw4xmf ebbqnls1" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></form><style data-emotion="css 1vwvvvd">.css-1vwvvvd{display:none;max-height:80vh;overflow:scroll;z-index:2;position:absolute;right:0;top:calc(100% + 0.5em);width:80vw;max-width:30em;box-shadow:0 0 5px 0;padding:0.5rem;background:#ffffff;border-radius:0.25em;}@media (max-width: 1024px){.css-1vwvvvd{width:100%;}}.css-1vwvvvd >*+*{padding-top:1em!important;border-top:2px solid black;}.css-1vwvvvd li{margin-bottom:0.4rem;}.css-1vwvvvd li+li{padding-top:0.7em;border-top:1px solid #ececec;}.css-1vwvvvd ul{margin:0;list-style:none;}.css-1vwvvvd mark{color:#1c1cff;box-shadow:inset 0 -2px 0 0 rgba(143,187,237,.5);}.css-1vwvvvd header{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:0.3em;}.css-1vwvvvd header h3{color:#ffffff;background:#4c4c4c;padding:0.1em 0.4em;border-radius:0.25em;}.css-1vwvvvd h3{margin:0 0 0.5em;}.css-1vwvvvd h4{margin-bottom:0.3em;}.css-1vwvvvd a{-webkit-text-decoration:none;text-decoration:none;}</style><div class="css-1vwvvvd e1unpkuh3"><div><strong><span>No results for your search</span></strong> <!-- -->&quot;<!-- -->&quot;</div></div></div><style data-emotion="css bpbc3b">.css-bpbc3b{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);background:inherit;padding:0px;border:0;color:inherit;box-shadow:var(--eth-shadows-none);}.css-bpbc3b:focus-visible,.css-bpbc3b[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-bpbc3b[disabled],.css-bpbc3b[aria-disabled=true],.css-bpbc3b[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--eth-shadows-none);}.css-bpbc3b:hover,.css-bpbc3b[data-hover]{color:var(--eth-colors-primary);}.css-bpbc3b:focus,.css-bpbc3b[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;}</style><button type="button" class="chakra-button css-bpbc3b" aria-label="Switch to Dark Theme"><style data-emotion="css 1ktqhdy">.css-1ktqhdy{width:1em;height:1em;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;font-size:var(--eth-fontSizes-2xl);}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" focusable="false" class="chakra-icon css-1ktqhdy" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2z"></path></svg></button><style data-emotion="css 3wvcuo">.css-3wvcuo{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);background:inherit;padding:initial;border:0;color:inherit;box-shadow:var(--eth-shadows-none);-webkit-text-decoration:none;text-decoration:none;}.css-3wvcuo:focus-visible,.css-3wvcuo[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-3wvcuo[disabled],.css-3wvcuo[aria-disabled=true],.css-3wvcuo[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--eth-shadows-none);}.css-3wvcuo:hover,.css-3wvcuo[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-primary);}.css-3wvcuo:hover[disabled],.css-3wvcuo[data-hover][disabled],.css-3wvcuo:hover[aria-disabled=true],.css-3wvcuo[data-hover][aria-disabled=true],.css-3wvcuo:hover[data-disabled],.css-3wvcuo[data-hover][data-disabled]{background:initial;box-shadow:var(--eth-shadows-none);}.css-3wvcuo:focus,.css-3wvcuo[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;}</style><style data-emotion="css 1sonbz4">.css-1sonbz4{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);white-space:normal;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);background:inherit;padding:initial;border:0;color:inherit;box-shadow:var(--eth-shadows-none);-webkit-text-decoration:none;text-decoration:none;}.css-1sonbz4:hover,.css-1sonbz4[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1sonbz4:focus-visible,.css-1sonbz4[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1sonbz4:focus,.css-1sonbz4[data-focus]{box-shadow:var(--eth-shadows-none);}.css-1sonbz4:focus-visible,.css-1sonbz4[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-1sonbz4[disabled],.css-1sonbz4[aria-disabled=true],.css-1sonbz4[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--eth-shadows-none);}.css-1sonbz4:hover,.css-1sonbz4[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-primary);}.css-1sonbz4:hover[disabled],.css-1sonbz4[data-hover][disabled],.css-1sonbz4:hover[aria-disabled=true],.css-1sonbz4[data-hover][aria-disabled=true],.css-1sonbz4:hover[data-disabled],.css-1sonbz4[data-hover][data-disabled]{background:initial;box-shadow:var(--eth-shadows-none);}.css-1sonbz4:focus,.css-1sonbz4[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;}</style><a class="chakra-link chakra-button css-1sonbz4" dir="ltr" href="/en/languages/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" focusable="false" class="chakra-icon css-1ktqhdy" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 00-1.38-3.56A8.03 8.03 0 0118.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 015.08 16zm2.95-8H5.08a7.987 7.987 0 014.33-3.56A15.65 15.65 0 008.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 01-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"></path></svg><style data-emotion="css 35yjgo">.css-35yjgo{padding-left:var(--eth-space-2);}</style><span class="chakra-text css-35yjgo"><span>Languages</span></span></a></div></div><style data-emotion="css hjrzhr">.css-hjrzhr{display:none;}@media (max-width: 1024px){.css-hjrzhr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="css-hjrzhr ejzo28p21"><style data-emotion="css 1ty3j1g">.css-1ty3j1g{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;background:none;border:none;color:inherit;display:inline-block;font:inherit;padding:initial;cursor:pointer;margin-left:1rem;}</style><button aria-label="Toggle search button" class="css-1ty3j1g ejzo28p19"><style data-emotion="css ojo301">.css-ojo301{fill:#b2b2b2;fill:#333333;margin-right:1rem;}.css-ojo301:hover svg{fill:#1c1cff;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-ojo301 ejzo28p18" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></button><button aria-label="Toggle menu button" class="css-1ty3j1g ejzo28p19"><style data-emotion="css 1ew3q6e">.css-1ew3q6e{margin:0 0.125rem;width:1.5rem;height:2.5rem;position:relative;stroke-width:2px;z-index:100;}.css-1ew3q6e>path{stroke:#333333;fill:none;}.css-1ew3q6e:hover{color:#1c1cff;}.css-1ew3q6e:hover>path{stroke:#1c1cff;}</style><svg viewBox="0 0 24 40" class="css-1ew3q6e ejzo28p15"><path d="M 2 13 l 10 0 l 0 0 l 10 0 M 4 19 l 8 0 M 12 19 l 8 0 M 2 25 l 10 0 l 0 0 l 10 0"></path></svg></button><style data-emotion="css h8etzh">.css-h8etzh{position:fixed;background:hsla(0, 0%, 69.8%, 0.9);top:0;left:0;right:0;bottom:0;height:100vh;}</style><div class="css-h8etzh ejzo28p17" style="display:none;opacity:0"></div><style data-emotion="css zhjif1">.css-zhjif1{background:#ffffff;z-index:99;position:fixed;left:0;top:0;height:100vh;overflow:hidden;width:100%;max-width:450px;}</style><div aria-hidden="true" class="css-zhjif1 ejzo28p16" style="transform:translateX(-100%) translateZ(0)"><style data-emotion="css oi7ycx">.css-oi7ycx{margin:0;height:100%;overflow-y:scroll;overflow-x:hidden;padding:3rem 1rem 8rem;}</style><ul class="css-oi7ycx ejzo28p11"><style data-emotion="css t585d3">.css-t585d3{margin:0;margin-bottom:3rem;list-style-type:none;list-style-image:none;}</style><li aria-label="Select Use Ethereum" class="css-t585d3 ejzo28p10"><style data-emotion="css 1nrcqrc">.css-1nrcqrc{margin:1rem 0;font-size:1.3rem;color:#333333;}</style><div class="css-1nrcqrc ejzo28p8"><span>Use Ethereum</span></div><style data-emotion="css ti75j2">.css-ti75j2{margin:0;}</style><ul class="css-ti75j2 ejzo28p6"><style data-emotion="css 1yn3rwb">.css-1yn3rwb{margin-bottom:1rem;list-style-type:none;list-style-image:none;opacity:0.7;}.css-1yn3rwb:hover{opacity:1;}</style><li class="css-1yn3rwb ejzo28p5"><style data-emotion="css 1k3j10i">.css-1k3j10i{-webkit-text-decoration:none;text-decoration:none;margin-right:2rem;color:#333333;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;}.css-1k3j10i svg{fill:#666666;}.css-1k3j10i:hover{-webkit-text-decoration:none;text-decoration:none;color:#1c1cff;}.css-1k3j10i:hover svg{fill:#1c1cff;}</style><style data-emotion="css 91i3fv">.css-91i3fv{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);white-space:normal;-webkit-text-decoration:none;text-decoration:none;margin-right:2rem;color:#333333;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;}.css-91i3fv:hover,.css-91i3fv[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-91i3fv:focus-visible,.css-91i3fv[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-91i3fv:focus,.css-91i3fv[data-focus]{box-shadow:var(--eth-shadows-none);}.css-91i3fv svg{fill:#666666;}.css-91i3fv:hover{-webkit-text-decoration:none;text-decoration:none;color:#1c1cff;}.css-91i3fv:hover svg{fill:#1c1cff;}</style><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/wallets/find-wallet/"><span>Find wallet</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/get-eth/"><span>Get ETH</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/dapps/"><span>Decentralized applications (dapps)</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/layer-2/"><span>Layer 2</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/nft/"><span>Non-fungible tokens (NFTs)</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/defi/"><span>Decentralized finance (DeFi)</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/dao/"><span>Decentralized autonomous organisations (DAOs)</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/stablecoins/"><span>Stablecoins</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/staking/"><span>Stake ETH</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/run-a-node/"><span>Run a node</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/social-networks/"><span>Decentralized social networks</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/decentralized-identity/"><span>Decentralized identity</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/desci/"><span>Decentralized science (DeSci)</span></a></li></ul></li><li aria-label="Select Learn" class="css-t585d3 ejzo28p10"><div class="css-1nrcqrc ejzo28p8"><span>Learn</span></div><ul class="css-ti75j2 ejzo28p6"><style data-emotion="css 1p65to4">.css-1p65to4{margin-top:2rem;margin-bottom:1rem;font-size:0.9rem;line-height:1;color:#333333;}</style><div class="css-1p65to4 ejzo28p7">Start here</div><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/learn/"><span>Learn Hub</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/guides/"><span>Guides hub</span></a></li><div class="css-1p65to4 ejzo28p7">Ethereum basics</div><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/what-is-ethereum/"><span>What is Ethereum?</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/eth/"><span>What is ether (ETH)?</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/wallets/"><span>Ethereum wallets</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/security/"><span>Ethereum security and scam prevention</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/web3/"><span>What is Web3?</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/smart-contracts/"><span>Smart contracts</span></a></li><div class="css-1p65to4 ejzo28p7">Ethereum protocol</div><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/energy-consumption/"><span>Ethereum energy consumption</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/upgrades/"><span>Ethereum upgrades</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/eips/"><span>Ethereum Improvement Proposals</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/history/"><span>History of Ethereum</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/whitepaper/"><span>Ethereum Whitepaper</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/glossary/"><span>Ethereum glossary</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/governance/"><span>Ethereum governance</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/bridges/"><span>Blockchain bridges</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/zero-knowledge-proofs/"><span>Zero-knowledge proofs</span></a></li></ul></li><li aria-label="Select Developers" class="css-t585d3 ejzo28p10"><div class="css-1nrcqrc ejzo28p8"><span>Developers</span></div><ul class="css-ti75j2 ejzo28p6"><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" style="color:#1c1cff" href="/en/developers/"><span>Developers' home</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/developers/docs/"><span>Documentation</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" style="color:#1c1cff" href="/en/developers/tutorials/"><span>Tutorials</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/developers/learning-tools/"><span>Learn by coding</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/developers/local-environment/"><span>Set up local environment</span></a></li></ul></li><li aria-label="Select Enterprise" class="css-t585d3 ejzo28p10"><div class="css-1nrcqrc ejzo28p8"><span>Enterprise</span></div><ul class="css-ti75j2 ejzo28p6"><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/enterprise/"><span>Mainnet Ethereum</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/enterprise/private-ethereum/"><span>Private Ethereum</span></a></li></ul></li><li aria-label="Select Community" class="css-t585d3 ejzo28p10"><div class="css-1nrcqrc ejzo28p8"><span>Community</span></div><ul class="css-ti75j2 ejzo28p6"><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/community/"><span>Community hub</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/community/online/"><span>Online communities</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/community/events/"><span>Ethereum events</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/community/get-involved/"><span>Get involved</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/community/research/"><span>Open research</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/community/grants/"><span>Grants</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/community/support/"><span>Ethereum support</span></a></li><li class="css-1yn3rwb ejzo28p5"><a class="chakra-link ejzo28p9 css-91i3fv" dir="ltr" href="/en/community/language-resources/"><span>Language resources</span></a></li></ul></li></ul></div><style data-emotion="css 6f7gax">.css-6f7gax{background:#ffffff;border-top:1px solid #ececec;padding-right:1rem;padding-left:1rem;margin-top:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:fixed;bottom:0;left:0;right:0;height:108px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;max-width:450px;z-index:99;}</style><div aria-hidden="true" class="css-6f7gax ejzo28p4" style="transform:translateX(-100%) translateZ(0)"><style data-emotion="css qnpcbq">.css-qnpcbq{-webkit-flex:1 1 120px;-ms-flex:1 1 120px;flex:1 1 120px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;color:#333333;}.css-qnpcbq>svg{fill:#333333;}.css-qnpcbq:hover{color:#1c1cff;}.css-qnpcbq:hover>svg{fill:#1c1cff;}</style><div class="css-qnpcbq ejzo28p3"><style data-emotion="css 38lpna">.css-38lpna{fill:#b2b2b2;fill:#333333;}.css-38lpna:hover svg{fill:#1c1cff;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-38lpna ejzo28p20" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg><style data-emotion="css cia9v4">.css-cia9v4{font-size:0.875rem;line-height:1.6;font-weight:400;letter-spacing:0.04em;margin-top:0.5rem;text-transform:uppercase;text-align:center;opacity:0.7;}.css-cia9v4:hover{opacity:1;}</style><div class="css-cia9v4 ejzo28p1"><span>Search</span></div></div><div class="css-qnpcbq ejzo28p3"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-38lpna ejzo28p20" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path></svg><div class="css-cia9v4 ejzo28p1"><span>Light</span></div></div><div class="css-qnpcbq ejzo28p3"><style data-emotion="css 1vu6eds">.css-1vu6eds{-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#333333;}.css-1vu6eds>svg{fill:#333333;}.css-1vu6eds:hover{-webkit-text-decoration:none;text-decoration:none;color:#1c1cff;}.css-1vu6eds:hover>svg{fill:#1c1cff;}</style><style data-emotion="css 1naw0gy">.css-1naw0gy{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);white-space:normal;-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#333333;}.css-1naw0gy:hover,.css-1naw0gy[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1naw0gy:focus-visible,.css-1naw0gy[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1naw0gy:focus,.css-1naw0gy[data-focus]{box-shadow:var(--eth-shadows-none);}.css-1naw0gy>svg{fill:#333333;}.css-1naw0gy:hover{-webkit-text-decoration:none;text-decoration:none;color:#1c1cff;}.css-1naw0gy:hover>svg{fill:#1c1cff;}</style><a class="chakra-link ejzo28p2 css-1naw0gy" dir="ltr" href="/en/languages/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-38lpna ejzo28p20" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 00-1.38-3.56A8.03 8.03 0 0118.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 015.08 16zm2.95-8H5.08a7.987 7.987 0 014.33-3.56A15.65 15.65 0 008.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 01-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"></path></svg><div class="css-cia9v4 ejzo28p1"><span>Languages</span></div></a></div></div><style data-emotion="css 1u0u6fz">.css-1u0u6fz{background:#ffffff;z-index:99;position:fixed;left:0;top:0;height:100vh;overflow:hidden;width:100%;max-width:450px;z-index:101;padding:1rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-1u0u6fz ejzo28p14" style="transform:translateX(-100%) translateZ(0)"><style data-emotion="css atmozw">.css-atmozw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-atmozw>svg{fill:#333333;}</style><h3 class="css-atmozw ejzo28p13"><span>Search</span><style data-emotion="css 1itof9b">.css-1itof9b{z-index:102;cursor:pointer;}.css-1itof9b>svg{fill:#333333;}</style><span class="css-1itof9b ejzo28p12"><style data-emotion="css 17s5pr0">.css-17s5pr0{fill:#b2b2b2;}.css-17s5pr0:hover svg{fill:#1c1cff;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-17s5pr0 eqmyn6j0" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></span></h3><div class="css-1s445dq e1unpkuh4"><form class="css-1m90wsh ebbqnls3"><input type="text" placeholder="Search" aria-label="Search" class="css-1w9oosq ebbqnls2" value=""/><p class="css-209ue6 ebbqnls0">/</p><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="css-vw4xmf ebbqnls1" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></form><div class="css-1vwvvvd e1unpkuh3"><div><strong><span>No results for your search</span></strong> <!-- -->&quot;<!-- -->&quot;</div></div></div><style data-emotion="css kpi1f2">.css-kpi1f2{color:#333333;background:#f2f2f2;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:10vw;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;width:280px;width:min(60vw, 280px);height:280px;height:min(60vw, 280px);border-radius:100%;}</style><div class="css-kpi1f2 ejzo28p0"><style data-emotion="css 14jmmgu">.css-14jmmgu{display:inline-block;margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;}.css-14jmmgu>img{width:3em!important;height:3em!important;margin:0!important;}</style><span size="3" mt="0" mr="0" mb="0" ml="0" class="css-14jmmgu e132dwxe0 undefined"><img alt="⛵" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/26f5.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span><span>Search away!</span></div></div></div></div></nav></div><style data-emotion="css 10i10jo">.css-10i10jo{height:80px;margin-top:-80px;}</style><div id="main-content" class="css-10i10jo"></div><style data-emotion="css 3cdidt">.css-3cdidt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width: 62em){.css-3cdidt{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><div class="css-3cdidt"><style data-emotion="css 1ofqig9">.css-1ofqig9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}</style><div class="css-1ofqig9"><style data-emotion="css qeq0vi">.css-qeq0vi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:space-around;-ms-flex-pack:space-around;-webkit-justify-content:space-around;justify-content:space-around;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow:visible;width:100%;}</style><div class="css-qeq0vi"><style data-emotion="css 1czzmml">.css-1czzmml{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;margin:0 auto;padding:0 2rem 0 0;background:#f7f7f7;border-bottom:1px solid #e5e5e5;background-color:#f7f7f7;}@media (max-width: 1024px){.css-1czzmml{margin:2rem 0rem;padding:0;background:#ffffff;}}</style><div dir="ltr" class="css-1czzmml e120i88y8"><style data-emotion="css hsqz4n">.css-hsqz4n{-webkit-flex:1 1 768px;-ms-flex:1 1 768px;flex:1 1 768px;max-width:1000px;background:#ffffff;box-shadow:0 14px 66px rgba(0,0,0,.07),0 10px 17px rgba(0,0,0,.03),0 4px 7px rgba(0,0,0,.05);margin:2rem 2rem;padding:4rem 4rem;margin-bottom:6rem;border-radius:4px;}@media (max-width: 1024px){.css-hsqz4n{margin:2.5rem 0rem;padding:3rem 2rem;box-shadow:none;width:100%;}}.css-hsqz4n .featured{padding-left:1rem;margin-left:-1rem;border-left:1px dotted #1c1cff;}.css-hsqz4n .citation p{color:#666666;}</style><article class="css-hsqz4n e120i88y5"><style data-emotion="css 9svezc">.css-9svezc{font-weight:700;font-size:2.5rem;font-family:"SFMono-Regular",Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;text-transform:uppercase;}.css-9svezc:before{content:"";display:block;height:140px;margin-top:-140px;visibility:hidden;}.css-9svezc a{display:none;}@media (max-width: 768px){.css-9svezc{font-size:1.75rem;}}</style><h1 class="css-9svezc e120i88y4">Optimism standard bridge contract walkthrough</h1><style data-emotion="css nc44o2">.css-nc44o2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-bottom-width:0;border-bottom-color:var(--eth-colors-border);}@media screen and (min-width: 62em){.css-nc44o2{border-bottom-width:1px;}}</style><div class="css-nc44o2"><style data-emotion="css 1t0hsli">.css-1t0hsli{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:var(--eth-sizes-full);margin-bottom:var(--eth-space-8);}</style><div class="css-1t0hsli"><style data-emotion="css 7nlxkq">.css-7nlxkq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:var(--eth-sizes-full);}</style><div class="css-7nlxkq"><style data-emotion="css 1eoanz8">.css-1eoanz8{display:inline-block;white-space:nowrap;vertical-align:middle;-webkit-padding-start:var(--eth-space-2);padding-inline-start:var(--eth-space-2);-webkit-padding-end:var(--eth-space-2);padding-inline-end:var(--eth-space-2);text-transform:uppercase;font-size:var(--eth-fontSizes-xs);border-radius:var(--eth-radii-base);font-weight:initial;border:1px solid;border-color:var(--eth-colors-transparent);padding-top:var(--eth-space-1);padding-bottom:var(--eth-space-1);background:var(--eth-colors-tagOrange);color:var(--eth-colors-black300);-webkit-margin-end:var(--eth-space-2);margin-inline-end:var(--eth-space-2);margin-bottom:var(--eth-space-2);}</style><span class="chakra-badge css-1eoanz8">solidity</span><style data-emotion="css kaxyug">.css-kaxyug{display:inline-block;white-space:nowrap;vertical-align:middle;-webkit-padding-start:var(--eth-space-2);padding-inline-start:var(--eth-space-2);-webkit-padding-end:var(--eth-space-2);padding-inline-end:var(--eth-space-2);text-transform:uppercase;font-size:var(--eth-fontSizes-xs);border-radius:var(--eth-radii-base);font-weight:initial;border:1px solid;border-color:var(--eth-colors-transparent);padding-top:var(--eth-space-1);padding-bottom:var(--eth-space-1);background:var(--eth-colors-tagBlue);color:var(--eth-colors-black300);-webkit-margin-end:var(--eth-space-2);margin-inline-end:var(--eth-space-2);margin-bottom:var(--eth-space-2);}</style><span class="chakra-badge css-kaxyug">optimism</span><span class="chakra-badge css-1eoanz8">bridge</span><style data-emotion="css 1gb6tsq">.css-1gb6tsq{display:inline-block;white-space:nowrap;vertical-align:middle;-webkit-padding-start:var(--eth-space-2);padding-inline-start:var(--eth-space-2);-webkit-padding-end:var(--eth-space-2);padding-inline-end:var(--eth-space-2);text-transform:uppercase;font-size:var(--eth-fontSizes-xs);border-radius:var(--eth-radii-base);font-weight:initial;border:1px solid;border-color:var(--eth-colors-transparent);padding-top:var(--eth-space-1);padding-bottom:var(--eth-space-1);background:var(--eth-colors-tagRed);color:var(--eth-colors-black300);-webkit-margin-end:var(--eth-space-2);margin-inline-end:var(--eth-space-2);margin-bottom:var(--eth-space-2);}</style><span class="chakra-badge css-1gb6tsq">layer 2</span></div><style data-emotion="css ieugrb">.css-ieugrb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;margin-bottom:var(--eth-space-2);white-space:nowrap;}</style><style data-emotion="css kbd79h">.css-kbd79h{display:inline-block;white-space:nowrap;vertical-align:middle;-webkit-padding-start:var(--eth-space-2);padding-inline-start:var(--eth-space-2);-webkit-padding-end:var(--eth-space-2);padding-inline-end:var(--eth-space-2);text-transform:uppercase;font-size:var(--eth-fontSizes-xs);border-radius:var(--eth-radii-base);font-weight:initial;border:1px solid;border-color:var(--eth-colors-primary100);padding-top:var(--eth-space-1);padding-bottom:var(--eth-space-1);color:var(--eth-colors-text);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;margin-bottom:var(--eth-space-2);white-space:nowrap;}</style><span class="chakra-badge css-kbd79h"><span>Intermediate</span></span></div><style data-emotion="css obuhcv">.css-obuhcv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--eth-space-6);margin-top:calc(var(--eth-space-4) * -1);font-size:var(--eth-fontSizes-sm);color:var(--eth-colors-text300);}.css-obuhcv>*:not(style)~*:not(style){margin-top:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-bottom:0px;-webkit-margin-start:var(--eth-space-4);margin-inline-start:var(--eth-space-4);}</style><div class="chakra-stack css-obuhcv"><div class="css-0"><style data-emotion="css f0nhvu">.css-f0nhvu{display:inline-block;font-size:var(--eth-fontSizes-sm);margin-right:var(--eth-space-2);}.css-f0nhvu>img{margin:0!important;display:initial;}</style><span class="css-f0nhvu undefined"><img alt="✍️" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/270d.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span>Ori Pomerantz</div><div class="css-0"><span class="css-f0nhvu undefined"><img alt="📆" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4c6.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span>March 30, 2022</div><div class="css-0"><span class="css-f0nhvu undefined"><img alt="⏱️" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/23f1.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span>33<!-- --> <span>minute read</span></div></div><style data-emotion="css hto1z8">.css-hto1z8{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--eth-space-6);margin-top:calc(var(--eth-space-4) * -1);font-size:var(--eth-fontSizes-sm);color:var(--eth-colors-text300);}.css-hto1z8>*:not(style)~*:not(style){margin-top:0px;-webkit-margin-end:0px;margin-inline-end:0px;margin-bottom:0px;-webkit-margin-start:0.5rem;margin-inline-start:0.5rem;}</style><div class="chakra-stack css-hto1z8"></div></div><style data-emotion="css 1yp7290">.css-1yp7290{margin-bottom:2rem;}</style><style data-emotion="css 1bd2izv">.css-1bd2izv{font-size:1rem;margin:2rem 0 1rem;color:#4c4c4c;}</style><p class="css-1bd2izv eaa11rl12"><style data-emotion="css 1q55j7y">.css-1q55j7y{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);}.css-1q55j7y:hover,.css-1q55j7y[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1q55j7y:focus-visible,.css-1q55j7y[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1q55j7y:focus,.css-1q55j7y[data-focus]{box-shadow:var(--eth-shadows-none);}.css-1q55j7y::after{content:"↗";margin-left:var(--eth-space-0-5);margin-right:var(--eth-space-1-5);}</style><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://www.optimism.io/" dir="ltr">Optimism</a> is an <style data-emotion="css 1x1y8s5">.css-1x1y8s5{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);white-space:normal;}.css-1x1y8s5:hover,.css-1x1y8s5[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1x1y8s5:focus-visible,.css-1x1y8s5[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1x1y8s5:focus,.css-1x1y8s5[data-focus]{box-shadow:var(--eth-shadows-none);}</style><a class="chakra-link css-1x1y8s5" dir="ltr" href="/en/developers/docs/scaling/optimistic-rollups/">Optimistic Rollup</a>.
Optimistic rollups can process transactions for a much lower price than Ethereum Mainnet (also known as layer 1 or L1) because transactions are only processed by a few nodes, instead of every node on the network.
At the same time, the data is all written to L1 so everything can be proved and reconstructed with all the integrity and availability guarantees of Mainnet.</p><p class="css-1bd2izv eaa11rl12">To use L1 assets on Optimism (or any other L2), the assets need to be <a class="chakra-link css-1x1y8s5" dir="ltr" href="/en/bridges/#prerequisites">bridged</a>.
One way to achieve this is for users to lock assets (ETH and <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://ethereum.org/en/developers/docs/standards/tokens/erc-20/" dir="ltr">ERC-20 tokens</a> are the most common ones) on L1, and receive equivalent assets to use on L2.
Eventually, whoever ends up with them might want to bridge them back to L1.
When doing this, the assets are burned on L2 and then released back to the user on L1.</p><p class="css-1bd2izv eaa11rl12">This is the way the <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://community.optimism.io/docs/developers/bridge/standard-bridge" dir="ltr">Optimism standard bridge</a> works.
In this article we go over the source code for that bridge to see how it works and study it as an example of well written Solidity code.</p><style data-emotion="css 1taa9ty">.css-1taa9ty{font-weight:700;position:inherit!important;font-family:"SFMono-Regular",Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;text-transform:uppercase;}.css-1taa9ty:before{content:"";display:block;height:120px;margin-top:-120px;visibility:hidden;}</style><h2 id="control-flows" style="position:relative" class="css-1taa9ty e120i88y3"><style data-emotion="css 1csu3i">.css-1csu3i{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);}.css-1csu3i:hover,.css-1csu3i[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1csu3i:focus-visible,.css-1csu3i[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1csu3i:focus,.css-1csu3i[data-focus]{box-shadow:var(--eth-shadows-none);}</style><a class="chakra-link header-anchor before css-1csu3i" href="#control-flows" dir="ltr" aria-label="control flows permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Control flows</h2><p class="css-1bd2izv eaa11rl12">The bridge has two main flows:</p><ul><style data-emotion="css 1n42h2q">.css-1n42h2q{color:#4c4c4c;}</style><li class="css-1n42h2q eaa11rl6">Deposit (from L1 to L2)</li><li class="css-1n42h2q eaa11rl6">Withdrawal (from L2 to L1)</li></ul><style data-emotion="css d16mz9">.css-d16mz9{position:inherit!important;}.css-d16mz9:before{content:"";display:block;height:120px;margin-top:-120px;visibility:hidden;}@media (max-width: 768px){.css-d16mz9{font-size:1rem;font-weight:600;}}</style><h3 id="deposit-flow" style="position:relative" class="css-d16mz9 e120i88y2"><a class="chakra-link header-anchor before css-1csu3i" href="#deposit-flow" dir="ltr" aria-label="deposit flow permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deposit flow</h3><style data-emotion="css vc1t8n">.css-vc1t8n{font-weight:600;position:unset!important;}.css-vc1t8n:before{content:"";display:block;height:120px;margin-top:-120px;visibility:hidden;}@media (max-width: 768px){.css-vc1t8n{font-size:1rem;font-weight:600;}}</style><h4 id="deposit-flow-layer-1" style="position:relative" class="css-vc1t8n e120i88y1"><a class="chakra-link header-anchor before css-1csu3i" href="#deposit-flow-layer-1" dir="ltr" aria-label="deposit flow layer 1 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layer 1</h4><ol><li class="css-1n42h2q eaa11rl6">If depositing an ERC-20, the depositor gives the bridge an allowance to spend the amount being deposited</li><li class="css-1n42h2q eaa11rl6">The depositor calls the L1 bridge (<code>depositERC20</code>, <code>depositERC20To</code>, <code>depositETH</code>, or <code>depositETHTo</code>)</li><li class="css-1n42h2q eaa11rl6">The L1 bridge takes possession of the bridged asset<ul><li class="css-1n42h2q eaa11rl6">ETH: The asset is transferred by the depositor as part of the call</li><li class="css-1n42h2q eaa11rl6">ERC-20: The asset is transferred by the bridge to itself using the allowance provided by the depositor</li></ul></li><li class="css-1n42h2q eaa11rl6">The L1 bridge uses the cross-domain message mechanism to call <code>finalizeDeposit</code> on the L2 bridge</li></ol><h4 id="deposit-flow-layer-2" style="position:relative" class="css-vc1t8n e120i88y1"><a class="chakra-link header-anchor before css-1csu3i" href="#deposit-flow-layer-2" dir="ltr" aria-label="deposit flow layer 2 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layer 2</h4><ol start="5"><li class="css-1n42h2q eaa11rl6">The L2 bridge verifies the call to <code>finalizeDeposit</code> is legitimate:<ul><li class="css-1n42h2q eaa11rl6">Came from the cross domain message contract</li><li class="css-1n42h2q eaa11rl6">Was originally from the bridge on L1</li></ul></li><li class="css-1n42h2q eaa11rl6">The L2 bridge checks if the ERC-20 token contract on L2 is the correct one:<ul><li class="css-1n42h2q eaa11rl6">The L2 contract reports that its L1 counterpart is the same as the one the tokens came from on L1</li><li class="css-1n42h2q eaa11rl6">The L2 contract reports that it supports the correct interface (<a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://eips.ethereum.org/EIPS/eip-165" dir="ltr">using ERC-165</a>).</li></ul></li><li class="css-1n42h2q eaa11rl6">If the L2 contract is the correct one, call it to mint the appropriate number of tokens to the appropriate address. If not, start a withdrawal process to allow the user to claim the tokens on L1.</li></ol><h3 id="withdrawal-flow" style="position:relative" class="css-d16mz9 e120i88y2"><a class="chakra-link header-anchor before css-1csu3i" href="#withdrawal-flow" dir="ltr" aria-label="withdrawal flow permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Withdrawal flow</h3><h4 id="withdrawl-flow-layer-2" style="position:relative" class="css-vc1t8n e120i88y1"><a class="chakra-link header-anchor before css-1csu3i" href="#withdrawl-flow-layer-2" dir="ltr" aria-label="withdrawl flow layer 2 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layer 2</h4><ol><li class="css-1n42h2q eaa11rl6">The withdrawer calls the L2 bridge (<code>withdraw</code> or <code>withdrawTo</code>)</li><li class="css-1n42h2q eaa11rl6">The L2 bridge burns the appropriate number of tokens belonging to <code>msg.sender</code></li><li class="css-1n42h2q eaa11rl6">The L2 bridge uses the cross-domain message mechanism to call <code>finalizeETHWithdrawal</code> or <code>finalizeERC20Withdrawal</code> on the L1 bridge</li></ol><h4 id="withdrawl-flow-layer-1" style="position:relative" class="css-vc1t8n e120i88y1"><a class="chakra-link header-anchor before css-1csu3i" href="#withdrawl-flow-layer-1" dir="ltr" aria-label="withdrawl flow layer 1 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layer 1</h4><ol start="4"><li class="css-1n42h2q eaa11rl6">The L1 bridge verifies the call to <code>finalizeETHWithdrawal</code> or <code>finalizeERC20Withdrawal</code> is legitimate:<ul><li class="css-1n42h2q eaa11rl6">Came from the cross domain message mechanism</li><li class="css-1n42h2q eaa11rl6">Was originally from the bridge on L2</li></ul></li><li class="css-1n42h2q eaa11rl6">The L1 bridge transfers the appropriate asset (ETH or ERC-20) to the appropriate address</li></ol><h2 id="layer-1-code" style="position:relative" class="css-1taa9ty e120i88y3"><a class="chakra-link header-anchor before css-1csu3i" href="#layer-1-code" dir="ltr" aria-label="layer 1 code permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Layer 1 code</h2><p class="css-1bd2izv eaa11rl12">This is the code that runs on L1, the Ethereum Mainnet.</p><h3 id="IL1ERC20Bridge" style="position:relative" class="css-d16mz9 e120i88y2"><a class="chakra-link header-anchor before css-1csu3i" href="#IL1ERC20Bridge" dir="ltr" aria-label="IL1ERC20Bridge permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IL1ERC20Bridge</h3><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L1/messaging/IL1ERC20Bridge.sol" dir="ltr">This interface is defined here</a>.
It includes functions and definitions required for bridging ERC-20 tokens.</p><style data-emotion="css 1u2wbzj">.css-1u2wbzj{position:relative;direction:ltr;}</style><div class="css-1u2wbzj ewe2xsn7"><style data-emotion="css x083wv">.css-x083wv{border-radius:4px;border:1px solid #e5e5e5;width:100%;max-height:calc((1.2rem * 8) + 4.185rem);overflow:scroll;margin-bottom:1rem;}</style><div class="css-x083wv ewe2xsn6"><style data-emotion="css 6lp1sk">.css-6lp1sk{padding-top:2.75rem;margin:0;padding-left:1rem;overflow:visible;min-width:100%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;}</style><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><style data-emotion="css xgv4ep">.css-xgv4ep{display:table-row;}</style><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><style data-emotion="css pfnbjh">.css-pfnbjh{display:table-cell;text-align:right;padding-right:2rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.4;}</style><span class="css-pfnbjh ewe2xsn3">1</span><style data-emotion="css plv82s">.css-plv82s{display:table-cell;}</style><span class="css-plv82s ewe2xsn2"><span class="token plain">// SPDX-License-Identifier: MIT</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><style data-emotion="css 1wlmr9d">.css-1wlmr9d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;position:absolute;top:0.75rem;right:1rem;}</style><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><style data-emotion="css 13nli3">.css-13nli3{border:1px solid #7f7f7f;border-radius:4px;background:#f7f7f7;margin-left:0.5rem;padding:0.25rem 0.5rem;}.css-13nli3:hover{cursor:pointer;-webkit-transform:scale(1.04);-moz-transform:scale(1.04);-ms-transform:scale(1.04);transform:scale(1.04);box-shadow:1px 1px 8px 1px rgba(0, 0, 0, 0.5);}</style><div class="css-13nli3 ewe2xsn0"><style data-emotion="css 14rjhd7">.css-14rjhd7{display:inline-block;margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;}.css-14rjhd7>img{width:1em!important;height:1em!important;margin:0!important;}</style><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://help.optimism.io/hc/en-us/articles/4411908707995-What-software-license-does-Optimism-use-" dir="ltr">Most of Optimism&#x27;s code is released under the MIT license</a>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">pragma solidity &gt;0.5.0 &lt;0.9.0;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">At writing the latest version of Solidity is 0.8.12.
Until version 0.9.0 is released, we don&#x27;t know if this code is compatible with it or not.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * @title IL1ERC20Bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">interface IL1ERC20Bridge {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**********</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Events *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     **********/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    event ERC20DepositInitiated(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="   📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">In Optimism bridge terminology <em>deposit</em> means transfer from L1 to L2, and <em>withdrawal</em> means a transfer from L2 to L1.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address indexed _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address indexed _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">In most cases the address of an ERC-20 on L1 is not the same the address of the equivalent ERC-20 on L2.
<a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://static.optimism.io/optimism.tokenlist.json" dir="ltr">You can see the list of token addresses here</a>.
The address with <code>chainId</code> 1 is on L1 (Mainnet) and the address with <code>chainId</code> 10 is on L2 (Optimism).
The other two <code>chainId</code> values are for the Kovan test network (42) and the Optimistic Kovan test network (69).</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address indexed _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">It is possible to add notes to transfers, in which case they are added to the events that report them.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    event ERC20WithdrawalFinalized(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address indexed _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address indexed _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address indexed _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The same bridge contract handles transfers in both directions.
In the case of the L1 bridge, this means initialization of deposits and finalization of withdrawals.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /********************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Public Functions *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ********************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev get the address of the corresponding L2 bridge contract.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @return Address of the corresponding L2 bridge contract.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function l2TokenBridge() external returns (address);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This function is not really needed, because on L2 it is a predeployed contract, so it is always at address <code>0x4200000000000000000000000000000000000010</code>.
It is here for symmetry with the L2 bridge, because the address of the L1 bridge is <em>not</em> trivial to know.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev deposit an amount of the ERC20 to the caller&#x27;s balance on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l1Token Address of the L1 ERC20 we are depositing</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Token Address of the L1 respective L2 ERC20</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _amount Amount of the ERC20 to deposit</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Gas Gas limit required to complete the deposit on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _data Optional data to forward to L2. This data is provided</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        solely as a convenience for external contracts. Aside from enforcing a maximum</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        length, these contracts provide no guarantees about its content.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function depositERC20(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l2Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The <code>_l2Gas</code> parameter is the amount of L2 gas the transaction is allowed to spend.
<a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://community.optimism.io/docs/developers/bridge/messaging/#for-l1-%E2%87%92-l2-transactions-2" dir="ltr">Up to a certain (high) limit, this is free</a>, so unless the ERC-20 contract does something really strange when minting, it should not be an issue.
This function takes care of the common scenario, where a user bridges assets to the same address on a different blockchain.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev deposit an amount of ERC20 to a recipient&#x27;s balance on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l1Token Address of the L1 ERC20 we are depositing</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Token Address of the L1 respective L2 ERC20</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _to L2 address to credit the withdrawal to.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _amount Amount of the ERC20 to deposit.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Gas Gas limit required to complete the deposit on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _data Optional data to forward to L2. This data is provided</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        solely as a convenience for external contracts. Aside from enforcing a maximum</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        length, these contracts provide no guarantees about its content.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function depositERC20To(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l2Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This function is almost identical to <code>depositERC20</code>, but it lets you send the ERC-20 to a different address.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /*************************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Cross-chain Functions *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *************************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev Complete a withdrawal from L2 to L1, and credit funds to the recipient&#x27;s balance of the</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * L1 ERC20 token.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * This call will fail if the initialized withdrawal from L2 has not been finalized.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l1Token Address of L1 token to finalizeWithdrawal for.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Token Address of L2 token where withdrawal was initiated.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _from L2 address initiating the transfer.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _to L1 address to credit the withdrawal to.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _amount Amount of the ERC20 to deposit.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _data Data provided by the sender on L2. This data is provided</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *   solely as a convenience for external contracts. Aside from enforcing a maximum</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *   length, these contracts provide no guarantees about its content.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function finalizeERC20Withdrawal(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">24</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">25</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">26</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">27</span><span class="css-plv82s ewe2xsn2"><span class="token plain">}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">28</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Withdrawals (and other messages from L2 to L1) in Optimism are a two step process:</p><ol><li class="css-1n42h2q eaa11rl6">An initiating transaction on L2.</li><li class="css-1n42h2q eaa11rl6">A finalizing or claiming transaction on L1.
This transaction needs to happen after the <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://community.optimism.io/docs/how-optimism-works/#fault-proofs" dir="ltr">fault challenge period</a> for the L2 transaction ends.</li></ol><h3 id="il1standardbridge" style="position:relative" class="css-d16mz9 e120i88y2"><a class="chakra-link header-anchor before css-1csu3i" href="#il1standardbridge" dir="ltr" aria-label="il1standardbridge permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IL1StandardBridge</h3><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L1/messaging/IL1StandardBridge.sol" dir="ltr">This interface is defined here</a>.
This file contains event and function definitions for ETH.
These definitions are very similar to those defined in <code>IL1ERC20Bridge</code> above for ERC-20.</p><p class="css-1bd2izv eaa11rl12">The bridge interface is divided between two files because some ERC-20 tokens require custom processing and cannot be handled by the standard bridge.
This way the custom bridge that handles such a token can implement <code>IL1ERC20Bridge</code> and not have to also bridge ETH.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">// SPDX-License-Identifier: MIT</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">pragma solidity &gt;0.5.0 &lt;0.9.0;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import &quot;./IL1ERC20Bridge.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * @title IL1StandardBridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">interface IL1StandardBridge is IL1ERC20Bridge {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**********</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Events *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     **********/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    event ETHDepositInitiated(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address indexed _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address indexed _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This event is nearly identical to the ERC-20 version (<code>ERC20DepositInitiated</code>), except without the L1 and L2 token addresses.
The same is true for the other events and the functions.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    event ETHWithdrawalFinalized(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /********************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Public Functions *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ********************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev Deposit an amount of the ETH to the caller&#x27;s balance on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function depositETH(uint32 _l2Gas, bytes calldata _data) external payable;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev Deposit an amount of ETH to a recipient&#x27;s balance on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">24</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">25</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function depositETHTo(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">26</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">27</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l2Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">28</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">29</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external payable;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">30</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">31</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /*************************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">32</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Cross-chain Functions *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">33</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *************************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">34</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">35</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">36</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev Complete a withdrawal from L2 to L1, and credit funds to the recipient&#x27;s balance of the</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">37</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * L1 ETH token. Since only the xDomainMessenger can call this function, it will never be called</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">38</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * before the withdrawal is finalized.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">39</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">40</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">41</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">42</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">43</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function finalizeETHWithdrawal(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">44</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">45</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">46</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">47</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">48</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">49</span><span class="css-plv82s ewe2xsn2"><span class="token plain">}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">50</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><h3 id="crossdomainenabled" style="position:relative" class="css-d16mz9 e120i88y2"><a class="chakra-link header-anchor before css-1csu3i" href="#crossdomainenabled" dir="ltr" aria-label="crossdomainenabled permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CrossDomainEnabled</h3><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/libraries/bridge/CrossDomainEnabled.sol" dir="ltr">This contract</a> is inherited by both bridges (<a class="chakra-link css-1csu3i" href="#the-l1-bridge-contract" dir="ltr">L1</a> and <a class="chakra-link css-1csu3i" href="#the-l2-bridge-contract" dir="ltr">L2</a>) to send messages to the other layer.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">// SPDX-License-Identifier: MIT</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">pragma solidity &gt;0.5.0 &lt;0.9.0;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/* Interface Imports */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { ICrossDomainMessenger } from &quot;./ICrossDomainMessenger.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/libraries/bridge/ICrossDomainMessenger.sol" dir="ltr">This interface</a> tells the contract how to send messages to the other layer, using the cross domain messenger.
This cross domain messenger is a whole other system, and deserves its own article, which I hope to write in the future.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * @title CrossDomainEnabled</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * @dev Helper contract for contracts performing cross-domain communications</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * Compiler used: defined by inheriting contract</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">contract CrossDomainEnabled {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /*************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Variables *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    // Messenger contract used to send and receive messages from the other domain.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    address public messenger;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /***************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Constructor *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ***************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _messenger Address of the CrossDomainMessenger on the current layer.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    constructor(address _messenger) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        messenger = _messenger;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">24</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">25</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The one parameter that the contract needs to know, the address of the cross domain messenger on this layer.
This parameter is set once, in the constructor, and never changes.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**********************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Function Modifiers *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     **********************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Enforces that the modified function is only callable by a specific cross-domain account.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _sourceDomainAccount The only account on the originating domain which is</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *  authenticated to call this function.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    modifier onlyFromCrossDomainAccount(address _sourceDomainAccount) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The cross domain messaging is accessible by any contract on the blockchain where it is running (either Ethereum mainnet or Optimism).
But we need the bridge on each side to <em>only</em> trust certain messages if they come from the bridge on the other side.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        require(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            msg.sender == address(getCrossDomainMessenger()),</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            &quot;OVM_XCHAIN: messenger contract unauthenticated&quot;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Only messages from the appropriate cross domain messenger (<code>messenger</code>, as you see below) can be trusted.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        require(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            getCrossDomainMessenger().xDomainMessageSender() == _sourceDomainAccount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            &quot;OVM_XCHAIN: wrong sender of cross-domain message&quot;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The way the cross domain messenger provides the address that sent a message with the other layer is <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L1/messaging/L1CrossDomainMessenger.sol#L122-L128" dir="ltr">the <code>.xDomainMessageSender()</code> function</a>.
As long as it is called in the transaction that was initiated by the message it can provide this information.</p><p class="css-1bd2izv eaa11rl12">We need to make sure that the message we received came from the other bridge.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**********************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Internal Functions *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     **********************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Gets the messenger, usually from storage. This function is exposed in case a child contract</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * needs to override.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @return The address of the cross-domain messenger contract which should be used.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function getCrossDomainMessenger() internal virtual returns (ICrossDomainMessenger) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        return ICrossDomainMessenger(messenger);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This function returns the cross domain messenger.
We use a function rather than the variable <code>messenger</code> to allow contracts that inherit from this one to use an algorithm to specify which cross domain messenger to use.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Sends a message to an account on another domain</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _crossDomainTarget The intended recipient on the destination domain</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _message The data to send to the target (usually calldata to a function with</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *  `onlyFromCrossDomainAccount()`)</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _gasLimit The gasLimit for the receipt of the message on the target domain.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function sendCrossDomainMessage(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _crossDomainTarget,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _gasLimit,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes memory _message</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Finally, the function that sends a message to the other layer.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) internal {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events, reentrancy-benign</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/crytic/slither" dir="ltr">Slither</a> is a static analyzer Optimism runs on every contract to look for vulnerabilities and other potential problems.
In this case, the following line triggers two vulnerabilities:</p><ol><li class="css-1n42h2q eaa11rl6"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/crytic/slither/wiki/Detector-Documentation#reentrancy-vulnerabilities-3" dir="ltr">Reentrancy events</a></li><li class="css-1n42h2q eaa11rl6"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/crytic/slither/wiki/Detector-Documentation#reentrancy-vulnerabilities-2" dir="ltr">Benign reentrancy</a></li></ol><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        getCrossDomainMessenger().sendMessage(_crossDomainTarget, _message, _gasLimit);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">In this case we are not worried about reentrancy we know <code>getCrossDomainMessenger()</code> returns a trustworthy address, even if Slither has no way to know that.</p><h3 id="the-l1-bridge-contract" style="position:relative" class="css-d16mz9 e120i88y2"><a class="chakra-link header-anchor before css-1csu3i" href="#the-l1-bridge-contract" dir="ltr" aria-label="the l1 bridge contract permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The L1 bridge contract</h3><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L1/messaging/L1StandardBridge.sol" dir="ltr">The source code for this contract is here</a>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">// SPDX-License-Identifier: MIT</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">pragma solidity ^0.8.9;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The interfaces can be part of other contracts, so they have to support a wide range of Solidity versions.
But the bridge itself is our contract, and we can be strict about what Solidity version it uses.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/* Interface Imports */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IL1StandardBridge } from &quot;./IL1StandardBridge.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IL1ERC20Bridge } from &quot;./IL1ERC20Bridge.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a class="chakra-link css-1csu3i" href="#IL1ERC20Bridge" dir="ltr">IL1ERC20Bridge</a> and <a class="chakra-link css-1csu3i" href="#IL1StandardBridge" dir="ltr">IL1StandardBridge</a> are explained above.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IL2ERC20Bridge } from &quot;../../L2/messaging/IL2ERC20Bridge.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L2/messaging/IL2ERC20Bridge.sol" dir="ltr">This interface</a> lets us create messages to control the standard bridge on L2.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IERC20 } from &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/IERC20.sol" dir="ltr">This interface</a> lets us control ERC-20 contracts.
<a class="chakra-link css-1x1y8s5" dir="ltr" href="/en/developers/tutorials/erc20-annotated-code/#the-interface">You can read more about it here</a>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/* Library Imports */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { CrossDomainEnabled } from &quot;../../libraries/bridge/CrossDomainEnabled.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a class="chakra-link css-1csu3i" href="#crossdomainenabled" dir="ltr">As explained above</a>, this contract is used for interlayer messaging.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { Lib_PredeployAddresses } from &quot;../../libraries/constants/Lib_PredeployAddresses.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/libraries/constants/Lib_PredeployAddresses.sol" dir="ltr"><code>Lib_PredeployAddresses</code></a> has the addresses for the L2 contracts that always have the same address. This includes the standard bridge on L2.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { Address } from &quot;@openzeppelin/contracts/utils/Address.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Address.sol" dir="ltr">OpenZeppelin&#x27;s Address utilities</a>. It is used to distinguish between contract addresses and those belonging to externally owned accounts (EOA).</p><p class="css-1bd2izv eaa11rl12">Note that this isn&#x27;t a perfect solution, because there is no way to distinguish between direct calls and calls made from a contract&#x27;s constructor, but at least this lets us identify and prevent some common user errors.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { SafeERC20 } from &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://eips.ethereum.org/EIPS/eip-20" dir="ltr">The ERC-20 standard</a> supports two ways for a contract to report failure:</p><ol><li class="css-1n42h2q eaa11rl6">Revert</li><li class="css-1n42h2q eaa11rl6">Return <code>false</code></li></ol><p class="css-1bd2izv eaa11rl12">Handling both cases would make our code more complicated, so instead we use <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/utils/SafeERC20.sol" dir="ltr">OpenZeppelin&#x27;s <code>SafeERC20</code></a>, which makes sure <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/utils/SafeERC20.sol#L96" dir="ltr">all failures result in a revert</a>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * @title L1StandardBridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * @dev The L1 ETH and ERC20 Bridge is a contract which stores deposited L1 funds and standard</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * tokens that are in use on L2. It synchronizes a corresponding L2 Bridge, informing it of deposits</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * and listening to it for newly finalized withdrawals.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">contract L1StandardBridge is IL1StandardBridge, CrossDomainEnabled {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    using SafeERC20 for IERC20;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This line is how we specify to use the <code>SafeERC20</code> wrapper every time we use the <code>IERC20</code> interface.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /********************************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * External Contract References *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ********************************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    address public l2TokenBridge;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The address of <a class="chakra-link css-1csu3i" href="#the-l2-bridge-contract" dir="ltr">L2StandardBridge</a>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    // Maps L1 token to L2 token to balance of the L1 token deposited</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    mapping(address =&gt; mapping(address =&gt; uint256)) public deposits;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">A double <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://www.tutorialspoint.com/solidity/solidity_mappings.htm" dir="ltr">mapping</a> like this is the way you define a <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://en.wikipedia.org/wiki/Sparse_matrix" dir="ltr">two-dimensional sparse array</a>.
Values in this data structure are identified as <code>deposit[L1 token addr][L2 token addr]</code>.
The default value is zero.
Only cells that are set to a different value are written to storage.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /***************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Constructor *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ***************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    // This contract lives behind a proxy, so the constructor parameters will go unused.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    constructor() CrossDomainEnabled(address(0)) {}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">To want to be able to upgrade this contract without having to copy all the variables in the storage.
To do that we use a <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://docs.openzeppelin.com/contracts/3.x/api/proxy" dir="ltr"><code>Proxy</code></a>, a contract that uses <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://solidity-by-example.org/delegatecall/" dir="ltr"><code>delegatecall</code></a> to transfer calls to a separate contact whose address is stored by the proxy contract (when you upgrade you tell the proxy to change that address).
When you use <code>delegatecall</code> the storage remains the storage of the <em>calling</em> contract, so the values of all the contract state variables are unaffected.</p><p class="css-1bd2izv eaa11rl12">One effect of this pattern is that the storage of the contract that is the <em>called</em> of <code>delegatecall</code> is not used and therefore the constructor values passed to it do not matter.
This is the reason we can provide a nonsensical value to the <code>CrossDomainEnabled</code> constructor.
It is also the reason the initialization below is separate from the constructor.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /******************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Initialization *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ******************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l1messenger L1 Messenger address being used for cross-chain communications.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2TokenBridge L2 standard bridge address.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    // slither-disable-next-line external-function</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/crytic/slither/wiki/Detector-Documentation#public-function-that-could-be-declared-external" dir="ltr">Slither test</a> identifies functions that are not called from the contract code and could therefore be declared <code>external</code> instead of <code>public</code>.
The gas cost of <code>external</code> functions can be lower, because they can be provided with parameters in the calldata.
Functions declared <code>public</code> have to be accessible from within the contract.
Contracts cannot modify their own calldata, so the parameters have to be in memory.
When such a function is called externally, it is necessary to copy the calldata to memory, which costs gas.
In this case the function is only called once, so the inefficiency does not matter to us.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function initialize(address _l1messenger, address _l2TokenBridge) public {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        require(messenger == address(0), &quot;Contract has already been initialized.&quot;);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The <code>initialize</code> function should only be called once.
If the address of either the L1 cross domain messenger or the L2 token bridge changes, we create a new proxy and a new bridge that calls it.
This is unlikely to happen except when the entire system is upgraded, a very rare occurrence.</p><p class="css-1bd2izv eaa11rl12">Note that this function does not have any mechanism that restricts <em>who</em> can call it.
This means that in theory an attacker could wait until we deploy the proxy and the first version of the bridge and then <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://solidity-by-example.org/hacks/front-running/" dir="ltr">front-run</a> to get to the <code>initialize</code> function before the legitimate user does. But there are two methods to prevent this:</p><ol><li class="css-1n42h2q eaa11rl6">If the contracts are deployed not directly by an EOA but <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://medium.com/upstate-interactive/creating-a-contract-with-a-smart-contract-bdb67c5c8595" dir="ltr">in a transaction that has another contract create them</a> the entire process can be atomic, and finish before any other transaction is executed.</li><li class="css-1n42h2q eaa11rl6">If the legitimate call to <code>initialize</code> fails it is always possible to ignore the newly created proxy and bridge and create new ones.</li></ol><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        messenger = _l1messenger;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        l2TokenBridge = _l2TokenBridge;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">These are the two parameters that the bridge needs to know.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Depositing *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     **************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /** @dev Modifier requiring sender to be EOA.  This check could be bypassed by a malicious</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *  contract via initcode, but it takes care of the user error we want to avoid.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    modifier onlyEOA() {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // Used to stop deposits from contracts (avoid accidentally lost tokens)</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        require(!Address.isContract(msg.sender), &quot;Account not EOA&quot;);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This is the reason we needed OpenZeppelin&#x27;s <code>Address</code> utilities.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev This function can be called with no data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * to deposit an amount of ETH to the caller&#x27;s balance on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Since the receive function doesn&#x27;t take data, a conservative</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * default amount is forwarded to L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    receive() external payable onlyEOA {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _initiateETHDeposit(msg.sender, msg.sender, 200_000, bytes(&quot;&quot;));</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This function exists for testing purposes.
Notice that it doesn&#x27;t appear in the interface definitions - it isn&#x27;t for normal use.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL1StandardBridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function depositETH(uint32 _l2Gas, bytes calldata _data) external payable onlyEOA {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _initiateETHDeposit(msg.sender, msg.sender, _l2Gas, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL1StandardBridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function depositETHTo(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l2Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external payable {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _initiateETHDeposit(msg.sender, _to, _l2Gas, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">These two functions are wrappers around <code>_initiateETHDeposit</code>, the function that handles the actual ETH deposit.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev Performs the logic for deposits by storing the ETH and informing the L2 ETH Gateway of</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * the deposit.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _from Account to pull the deposit from on L1.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _to Account to give the deposit to on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Gas Gas limit required to complete the deposit on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _data Optional data to forward to L2. This data is provided</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        solely as a convenience for external contracts. Aside from enforcing a maximum</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        length, these contracts provide no guarantees about its content.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function _initiateETHDeposit(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l2Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes memory _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) internal {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // Construct calldata for finalizeDeposit call</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes memory message = abi.encodeWithSelector(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The way that cross domain messages work is that the destination contract is called with the message as its calldata.
Solidity contracts always interpret their calldata is accordance with
<a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://docs.soliditylang.org/en/v0.8.12/abi-spec.html" dir="ltr">the ABI specifications</a>.
The Solidity function <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://docs.soliditylang.org/en/v0.8.12/units-and-global-variables.html#abi-encoding-and-decoding-functions" dir="ltr"><code>abi.encodeWithSelector</code></a> creates that calldata.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            IL2ERC20Bridge.finalizeDeposit.selector,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            address(0),</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            Lib_PredeployAddresses.OVM_ETH,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            msg.value,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The message here is to call <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L2/messaging/L2StandardBridge.sol#L141-L148" dir="ltr">the <code>finalizeDeposit</code> function</a> with these parameters:</p><style data-emotion="css egqenl">.css-egqenl{margin-top:var(--eth-space-8);margin-bottom:var(--eth-space-8);overflow-x:auto;}</style><div class="css-egqenl"><style data-emotion="css arnyt4">.css-arnyt4{font-variant-numeric:lining-nums tabular-nums;border-collapse:collapse;width:var(--eth-sizes-full);}.css-arnyt4 th{border-bottom:1px solid;border-color:var(--eth-colors-border);white-space:nowrap;}</style><table role="table" class="chakra-table css-arnyt4"><thead><tr><th>Parameter</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td>_<!-- -->l1Token</td><td>address(0)</td><td>Special value to stand for ETH (which isn&#x27;t an ERC-20 token) on L1</td></tr><tr><td>_<!-- -->l2Token</td><td>Lib_PredeployAddresses.OVM_ETH</td><td>The L2 contract that manages ETH on Optimism, <code>0xDeadDeAddeAddEAddeadDEaDDEAdDeaDDeAD0000</code> (this contract is for internal Optimism use only)</td></tr><tr><td>_<!-- -->from</td><td>_<!-- -->from</td><td>The address on L1 that sends the ETH</td></tr><tr><td>_<!-- -->to</td><td>_<!-- -->to</td><td>The address on L2 that receives the ETH</td></tr><tr><td>amount</td><td>msg.value</td><td>Amount of wei sent (which has already been sent to the bridge)</td></tr><tr><td>_<!-- -->data</td><td>_<!-- -->data</td><td>Additional date to attach to the deposit</td></tr></tbody></table></div><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // Send calldata into L2</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        sendCrossDomainMessage(l2TokenBridge, _l2Gas, message);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Send the message through the cross domain messenger.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        emit ETHDepositInitiated(_from, _to, msg.value, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Emit an event to inform any decentralized application that listens of this transfer.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL1ERC20Bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function depositERC20(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external virtual onlyEOA {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _initiateERC20Deposit(_l1Token, _l2Token, msg.sender, msg.sender, _amount, _l2Gas, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL1ERC20Bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function depositERC20To(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        .</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external virtual {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _initiateERC20Deposit(_l1Token, _l2Token, msg.sender, _to, _amount, _l2Gas, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">These two functions are wrappers around <code>_initiateERC20Deposit</code>, the function that handles the actual ERC-20 deposit.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev Performs the logic for deposits by informing the L2 Deposited Token</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * contract of the deposit and calling a handler to lock the L1 funds. (e.g. transferFrom)</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l1Token Address of the L1 ERC20 we are depositing</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Token Address of the L1 respective L2 ERC20</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _from Account to pull the deposit from on L1</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _to Account to give the deposit to on L2</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _amount Amount of the ERC20 to deposit.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Gas Gas limit required to complete the deposit on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _data Optional data to forward to L2. This data is provided</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        solely as a convenience for external contracts. Aside from enforcing a maximum</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        length, these contracts provide no guarantees about its content.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function _initiateERC20Deposit(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l2Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) internal {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">24</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This function is similar to <code>_initiateETHDeposit</code> above, with a few important differences.
The first difference is that this function receives the token addresses and the amount to transfer as parameters.
In the case of ETH the call to the bridge already includes the transfer of asset to the bridge account (<code>msg.value</code>).</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // When a deposit is initiated on L1, the L1 Bridge transfers the funds to itself for future</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // withdrawals. safeTransferFrom also checks if the contract has code, so this will fail if</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // _from is an EOA or address(0).</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events, reentrancy-benign</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        IERC20(_l1Token).safeTransferFrom(_from, address(this), _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">ERC-20 token transfers follow a different process from ETH:</p><ol><li class="css-1n42h2q eaa11rl6">The user (<code>_from</code>) gives an allowance to the bridge to transfer the appropriate tokens.</li><li class="css-1n42h2q eaa11rl6">The user calls the bridge with the address of the token contract, the amount, etc.</li><li class="css-1n42h2q eaa11rl6">The bridge transfers the tokens (to itself) as part of the deposit process.</li></ol><p class="css-1bd2izv eaa11rl12">The first step may happen in a separate transaction from the last two.
However, front-running is not a problem because the two functions that call <code>_initiateERC20Deposit</code> (<code>depositERC20</code> and <code>depositERC20To</code>) only call this function with <code>msg.sender</code> as the <code>_from</code> parameter.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // Construct calldata for _l2Token.finalizeDeposit(_to, _amount)</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes memory message = abi.encodeWithSelector(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            IL2ERC20Bridge.finalizeDeposit.selector,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // Send calldata into L2</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events, reentrancy-benign</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        sendCrossDomainMessage(l2TokenBridge, _l2Gas, message);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-benign</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        deposits[_l1Token][_l2Token] = deposits[_l1Token][_l2Token] + _amount;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Add the deposited amount of tokens to the <code>deposits</code> data structure.
There could be multiple addresses on L2 that correspond to the same L1 ERC-20 token, so it is not sufficient to use the bridge&#x27;s balance of the L1 ERC-20 token to keep track of deposits.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        emit ERC20DepositInitiated(_l1Token, _l2Token, _from, _to, _amount, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /*************************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Cross-chain Functions *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *************************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL1StandardBridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function finalizeETHWithdrawal(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The L2 bridge sends a message to the L2 cross domain messenger which causes the L1 cross domain messenger to call this function (once the <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://community.optimism.io/docs/developers/bridge/messaging/#fees-for-l2-%E2%87%92-l1-transactions" dir="ltr">transaction that finalizes the message</a> is submitted on L1, of course).</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external onlyFromCrossDomainAccount(l2TokenBridge) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Make sure that this is a <em>legitimate</em> message, coming from the cross domain messenger and originating with the L2 token bridge.
This function is used to withdraw ETH from the bridge, so we have to make sure it is only called by the authorized caller.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        (bool success, ) = _to.call{ value: _amount }(new bytes(0));</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The way to transfer ETH is to call the recipient with the amount of wei in the <code>msg.value</code>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        require(success, &quot;TransferHelper::safeTransferETH: ETH transfer failed&quot;);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        emit ETHWithdrawalFinalized(_from, _to, _amount, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Emit an event about the withdrawal.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL1ERC20Bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function finalizeERC20Withdrawal(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external onlyFromCrossDomainAccount(l2TokenBridge) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This function is similar to <code>finalizeETHWithdrawal</code> above, with the necessary changes for ERC-20 tokens.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        deposits[_l1Token][_l2Token] = deposits[_l1Token][_l2Token] - _amount;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Update the <code>deposits</code> data structure.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // When a withdrawal is finalized on L1, the L1 Bridge transfers the funds to the withdrawer</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        IERC20(_l1Token).safeTransfer(_to, _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        emit ERC20WithdrawalFinalized(_l1Token, _l2Token, _from, _to, _amount, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /*****************************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Temporary - Migrating ETH *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *****************************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev Adds ETH balance to the account. This is meant to allow for ETH</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * to be migrated from an old gateway to a new gateway.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * NOTE: This is left for one upgrade only so we are able to receive the migrated ETH from the</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * old contract</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function donateETH() external payable {}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain">}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">There was an earlier implementation of the bridge.
When we moved from the implementation to this one, we had to move all the assets.
ERC-20 tokens can just be moved.
However, to transfer ETH to a contract you need that contract&#x27;s approval, which is what <code>donateETH</code> provides us.</p><h2 id="erc-20-tokens-on-l2" style="position:relative" class="css-1taa9ty e120i88y3"><a class="chakra-link header-anchor before css-1csu3i" href="#erc-20-tokens-on-l2" dir="ltr" aria-label="erc 20 tokens on l2 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ERC-20 Tokens on L2</h2><p class="css-1bd2izv eaa11rl12">For an ERC-20 token to fit into the standard bridge, it needs to allow the standard bridge, and <em>only</em> the standard bridge, to mint token.
This is necessary because the bridges need to ensure that the number of tokens circulating on Optimism is equal to the number of tokens locked inside the L1 bridge contract.
If there are too many tokens on L2 some users would be unable to bridge their assets back to L1.
Instead of a trusted bridge, we would essentially recreate <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://www.investopedia.com/terms/f/fractionalreservebanking.asp" dir="ltr">fractional reserve banking</a>.
If there are too many tokens on L1, some of those tokens would stay locked inside the bridge contract forever because there is no way to release them without burning L2 tokens.</p><h3 id="il2standarderc20" style="position:relative" class="css-d16mz9 e120i88y2"><a class="chakra-link header-anchor before css-1csu3i" href="#il2standarderc20" dir="ltr" aria-label="il2standarderc20 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IL2StandardERC20</h3><p class="css-1bd2izv eaa11rl12">Every ERC-20 token on L2 that uses the standard bridge needs to provide <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/standards/IL2StandardERC20.sol" dir="ltr">this interface</a>, which has the functions and events that the standard bridge needs.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">// SPDX-License-Identifier: MIT</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">pragma solidity ^0.8.9;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IERC20 } from &quot;@openzeppelin/contracts/token/ERC20/IERC20.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/IERC20.sol" dir="ltr">The standard ERC-20 interface</a> does not include the <code>mint</code> and <code>burn</code> functions.
Those methods are not required by <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://eips.ethereum.org/EIPS/eip-20" dir="ltr">the ERC-20 standard</a>, which leaves unspecified the mechanisms to create and destroy tokens.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IERC165 } from &quot;@openzeppelin/contracts/utils/introspection/IERC165.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/introspection/IERC165.sol" dir="ltr">The ERC-165 interface</a> is used to specify what functions a contract provides.
<a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://eips.ethereum.org/EIPS/eip-165" dir="ltr">You can read the standard here</a>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">interface IL2StandardERC20 is IERC20, IERC165 {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function l1Token() external returns (address);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This function provides the address of the L1 token which is bridged to this contract.
Note that we do not have a similar function in the opposite direction.
We need to be able to bridge any L1 token, regardless of whether L2 support was planned when it was implemented or not.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function mint(address _to, uint256 _amount) external;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function burn(address _from, uint256 _amount) external;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    event Mint(address indexed _account, uint256 _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    event Burn(address indexed _account, uint256 _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Functions and events to mint (create) and burn (destroy) tokens.
The bridge should be the only entity that can run these functions to ensure the number of tokens is correct (equal to the number of tokens locked on L1).</p><h3 id="L2StandardERC20" style="position:relative" class="css-d16mz9 e120i88y2"><a class="chakra-link header-anchor before css-1csu3i" href="#L2StandardERC20" dir="ltr" aria-label="L2StandardERC20 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>L2StandardERC20</h3><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/standards/L2StandardERC20.sol" dir="ltr">This is our implementation of the <code>IL2StandardERC20</code> interface</a>.
Unless you need some kind of custom logic, you should use this one.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">// SPDX-License-Identifier: MIT</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">pragma solidity ^0.8.9;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { ERC20 } from &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12"><a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol" dir="ltr">The OpenZeppelin ERC-20 contract</a>.
Optimism does not believe in reinventing the wheel, especially when the wheel is well audited and needs to be trustworthy enough to hold assets.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import &quot;./IL2StandardERC20.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">contract L2StandardERC20 is IL2StandardERC20, ERC20 {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    address public l1Token;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    address public l2Bridge;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">These are the two additional configuration parameters that we require and ERC-20 normally does not.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Bridge Address of the L2 standard bridge.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l1Token Address of the corresponding L1 token.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _name ERC20 name.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _symbol ERC20 symbol.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    constructor(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Bridge,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        string memory _name,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        string memory _symbol</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) ERC20(_name, _symbol) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        l1Token = _l1Token;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        l2Bridge = _l2Bridge;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">First call the constructor for the contract we inherit from (<code>ERC20(_name, _symbol)</code>) and then set our own variables.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    modifier onlyL2Bridge() {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        require(msg.sender == l2Bridge, &quot;Only L2 Bridge can mint and burn&quot;);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    // slither-disable-next-line external-function</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function supportsInterface(bytes4 _interfaceId) public pure returns (bool) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes4 firstSupportedInterface = bytes4(keccak256(&quot;supportsInterface(bytes4)&quot;)); // ERC165</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes4 secondSupportedInterface = IL2StandardERC20.l1Token.selector ^</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            IL2StandardERC20.mint.selector ^</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            IL2StandardERC20.burn.selector;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        return _interfaceId == firstSupportedInterface || _interfaceId == secondSupportedInterface;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This is the way <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://eips.ethereum.org/EIPS/eip-165" dir="ltr">ERC-165</a> works.
Every interface is a number of supported functions, and is identified as the <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://en.wikipedia.org/wiki/Exclusive_or" dir="ltr">exclusive or</a> of the <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://docs.soliditylang.org/en/v0.8.12/abi-spec.html#function-selector" dir="ltr">ABI function selectors</a> of those functions.</p><p class="css-1bd2izv eaa11rl12">The L2 bridge uses ERC-165 as a sanity check to make sure that the ERC-20 contract to which it sends assets is an <code>IL2StandardERC20</code>.</p><p class="css-1bd2izv eaa11rl12"><strong>Note:</strong> There is nothing to prevent rogue contract from providing false answers to <code>supportsInterface</code>, so this is a sanity check mechanism, <em>not</em> a security mechanism.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    // slither-disable-next-line external-function</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function mint(address _to, uint256 _amount) public virtual onlyL2Bridge {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _mint(_to, _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        emit Mint(_to, _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    // slither-disable-next-line external-function</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function burn(address _from, uint256 _amount) public virtual onlyL2Bridge {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _burn(_from, _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        emit Burn(_from, _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Only the L2 bridge is allowed to mint and burn assets.</p><p class="css-1bd2izv eaa11rl12"><code>_mint</code> and <code>_burn</code> are actually defined in the <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://ethereum.org/en/developers/tutorials/erc20-annotated-code/#the-_mint-and-_burn-functions-_mint-and-_burn" dir="ltr">OpenZeppelin ERC-20 contract</a>.
That contract just doesn&#x27;t expose them externally, because the conditions to mint and burn tokens are as varied as the number of ways to use ERC-20.</p><h2 id="l2-bridge-code" style="position:relative" class="css-1taa9ty e120i88y3"><a class="chakra-link header-anchor before css-1csu3i" href="#l2-bridge-code" dir="ltr" aria-label="l2 bridge code permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>L2 Bridge Code</h2><p class="css-1bd2izv eaa11rl12">This is code that runs the bridge on Optimism.
<a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L2/messaging/L2StandardBridge.sol" dir="ltr">The source for this contract is here</a>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">// SPDX-License-Identifier: MIT</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">pragma solidity ^0.8.9;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/* Interface Imports */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IL1StandardBridge } from &quot;../../L1/messaging/IL1StandardBridge.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IL1ERC20Bridge } from &quot;../../L1/messaging/IL1ERC20Bridge.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IL2ERC20Bridge } from &quot;./IL2ERC20Bridge.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">The <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts/contracts/L2/messaging/IL2ERC20Bridge.sol" dir="ltr">IL2ERC20Bridge</a> interface is very similar to the <a class="chakra-link css-1csu3i" href="#IL1ERC20Bridge" dir="ltr">L1 equivalent</a> we saw above.
There are two significant differences:</p><ol><li class="css-1n42h2q eaa11rl6">On L1 you initiate deposits and finalize withdrawals.
Here you initiate withdrawals and finalize deposits.</li><li class="css-1n42h2q eaa11rl6">On L1 it is necessary to distinguish between ETH and ERC-20 tokens.
On L2 we can use the same functions for both because internally ETH balances on Optimism are handled as an ERC-20 token with the address <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://optimistic.etherscan.io/address/0xDeadDeAddeAddEAddeadDEaDDEAdDeaDDeAD0000" dir="ltr">0xDeadDeAddeAddEAddeadDEaDDEAdDeaDDeAD0000</a>.</li></ol><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/* Library Imports */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { ERC165Checker } from &quot;@openzeppelin/contracts/utils/introspection/ERC165Checker.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { CrossDomainEnabled } from &quot;../../libraries/bridge/CrossDomainEnabled.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { Lib_PredeployAddresses } from &quot;../../libraries/constants/Lib_PredeployAddresses.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/* Contract Imports */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">import { IL2StandardERC20 } from &quot;../../standards/IL2StandardERC20.sol&quot;;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">/**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * @title L2StandardBridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * @dev The L2 Standard bridge is a contract which works together with the L1 Standard bridge to</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * enable ETH and ERC20 transitions between L1 and L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * This contract acts as a minter for new tokens when it hears about deposits into the L1 Standard</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * bridge.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * This contract also acts as a burner of the tokens intended for withdrawal, informing the L1</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> * bridge to release L1 funds.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain"> */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">contract L2StandardBridge is IL2ERC20Bridge, CrossDomainEnabled {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /********************************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * External Contract References *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ********************************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    address public l1TokenBridge;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">24</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Keep track of the address of the L1 bridge.
Note that in contrast to the L1 equivalent, here we <em>need</em> this variable.
The address of the L1 bridge is not known in advance.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /***************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Constructor *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ***************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2CrossDomainMessenger Cross-domain messenger used by this contract.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l1TokenBridge Address of the L1 bridge deployed to the main chain.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    constructor(address _l2CrossDomainMessenger, address _l1TokenBridge)</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        CrossDomainEnabled(_l2CrossDomainMessenger)</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        l1TokenBridge = _l1TokenBridge;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /***************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Withdrawing *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ***************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL2ERC20Bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function withdraw(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">24</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">25</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">26</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l1Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">27</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">28</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external virtual {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">29</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _initiateWithdrawal(_l2Token, msg.sender, msg.sender, _amount, _l1Gas, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">30</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">31</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">32</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">33</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL2ERC20Bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">34</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">35</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function withdrawTo(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">36</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">37</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">38</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">39</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l1Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">40</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">41</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external virtual {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">42</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        _initiateWithdrawal(_l2Token, msg.sender, _to, _amount, _l1Gas, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">43</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">44</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">These two functions initiate withdrawals.
Note that there is no needs to specify the L1 token address.
L2 tokens are expected to tell us the L1 equivalent&#x27;s address.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @dev Performs the logic for withdrawals by burning the token and informing</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *      the L1 token Gateway of the withdrawal.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l2Token Address of L2 token where withdrawal is initiated.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _from Account to pull the withdrawal from on L2.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _to Account to give the withdrawal to on L1.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _amount Amount of the token to withdraw.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _l1Gas Unused, but included for potential forward compatibility considerations.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @param _data Optional data to forward to L1. This data is provided</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        solely as a convenience for external contracts. Aside from enforcing a maximum</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     *        length, these contracts provide no guarantees about its content.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function _initiateWithdrawal(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint32 _l1Gas,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) internal {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // When a withdrawal is initiated, we burn the withdrawer&#x27;s funds to prevent subsequent L2</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // usage</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">24</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">25</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        IL2StandardERC20(_l2Token).burn(msg.sender, _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">26</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Notice that we are <em>not</em> relying on the <code>_from</code> parameter but on <code>msg.sender</code> which is a lot harder to fake (impossible, as far as I know).</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // Construct calldata for l1TokenBridge.finalizeERC20Withdrawal(_to, _amount)</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address l1Token = IL2StandardERC20(_l2Token).l1Token();</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes memory message;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        if (_l2Token == Lib_PredeployAddresses.OVM_ETH) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">On L1 it is necessary to distinguish between ETH and ERC-20.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            message = abi.encodeWithSelector(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                IL1StandardBridge.finalizeETHWithdrawal.selector,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        } else {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            message = abi.encodeWithSelector(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                IL1ERC20Bridge.finalizeERC20Withdrawal.selector,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">20</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // Send message up to L1 bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">21</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">22</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        sendCrossDomainMessage(l1TokenBridge, _l1Gas, message);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">23</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">24</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">25</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        emit WithdrawalInitiated(l1Token, _l2Token, msg.sender, _to, _amount, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">26</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">27</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">28</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /************************************</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">29</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * Cross-chain Function: Depositing *</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">30</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     ************************************/</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">31</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">32</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    /**</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">33</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     * @inheritdoc IL2ERC20Bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">34</span><span class="css-plv82s ewe2xsn2"><span class="token plain">     */</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">35</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    function finalizeDeposit(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">36</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">37</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">38</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">39</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        address _to,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">40</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        uint256 _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">41</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        bytes calldata _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">42</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">This function is called by <code>L1StandardBridge</code>.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    ) external virtual onlyFromCrossDomainAccount(l1TokenBridge) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Make sure the source of the message is legitimate.
This is important because this function calls <code>_mint</code> and could be used to give tokens that are not covered by tokens the bridge owns on L1.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // Check the target token is compliant and</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        // verify the deposited token on L1 matches the L2 deposited token representation here</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        if (</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            ERC165Checker.supportsInterface(_l2Token, 0x1d1d8b63) &amp;&amp;</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            _l1Token == IL2StandardERC20(_l2Token).l1Token()</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">Sanity checks:</p><ol><li class="css-1n42h2q eaa11rl6">The correct interface is supported</li><li class="css-1n42h2q eaa11rl6">The L2 ERC-20 contract&#x27;s L1 address matches the L1 source of the tokens</li></ol><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        ) {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // When a deposit is finalized, we credit the account on L2 with the same amount of</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // tokens.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            IL2StandardERC20(_l2Token).mint(_to, _amount);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            emit DepositFinalized(_l1Token, _l2Token, _from, _to, _amount, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">If the sanity checks pass, finalize the deposit:</p><ol><li class="css-1n42h2q eaa11rl6">Mint the tokens</li><li class="css-1n42h2q eaa11rl6">Emit the appropriate event</li></ol><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        } else {</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // Either the L2 token which is being deposited-into disagrees about the correct address</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // of its L1 token, or does not support the correct interface.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // This should only happen if there is a  malicious L2 token, or if a user somehow</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // specified the wrong L2 token address to deposit into.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // In either case, we stop the process here and construct a withdrawal</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // message so that users can get their funds out in some cases.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // There is no way to prevent malicious token contracts altogether, but this does limit</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // user error and mitigate some forms of malicious contract behavior.</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><p class="css-1bd2izv eaa11rl12">If a user made a detectable error by using the wrong L2 token address, we want to cancel the deposit and return the tokens on L1.
The only way we can do this from L2 is to send a message that will have to wait the fault challenge period, but that is much better for the user than losing the tokens permanently.</p><div class="css-1u2wbzj ewe2xsn7"><div class="css-x083wv ewe2xsn6"><pre style="background-color:#fafafa;color:#333333" class="prism-code language-solidity css-6lp1sk ewe2xsn5"><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">1</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            bytes memory message = abi.encodeWithSelector(</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">2</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                IL1ERC20Bridge.finalizeERC20Withdrawal.selector,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">3</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _l1Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">4</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _l2Token,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">5</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _to, // switched the _to and _from here to bounce back the deposit to the sender</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">6</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _from,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">7</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _amount,</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">8</span><span class="css-plv82s ewe2xsn2"><span class="token plain">                _data</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">9</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            );</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">10</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">11</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // Send message up to L1 bridge</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">12</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">13</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            sendCrossDomainMessage(l1TokenBridge, 0, message);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">14</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            // slither-disable-next-line reentrancy-events</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">15</span><span class="css-plv82s ewe2xsn2"><span class="token plain">            emit DepositFailed(_l1Token, _l2Token, _from, _to, _amount, _data);</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">16</span><span class="css-plv82s ewe2xsn2"><span class="token plain">        }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">17</span><span class="css-plv82s ewe2xsn2"><span class="token plain">    }</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">18</span><span class="css-plv82s ewe2xsn2"><span class="token plain">}</span></span></div><div class="token-line css-xgv4ep ewe2xsn4" style="color:#333333"><span class="css-pfnbjh ewe2xsn3">19</span><span class="css-plv82s ewe2xsn2"><span class="token plain" style="display:inline-block">
</span></span></div><div class="prism-code language-solidity css-1wlmr9d ewe2xsn1"><div class="css-13nli3 ewe2xsn0"><span>Show all</span></div><div class="css-0"><div class="css-13nli3 ewe2xsn0"><span size="1" mt="0" mr="0" mb="0" ml="0" class="css-14rjhd7 e132dwxe0 undefined"><img alt="📋" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f4cb.svg" style="width:1em;height:1em;margin:0 .05em 0 .1em;vertical-align:-0.1em"/></span> <span>Copy</span></div></div></div></pre></div></div><h2 id="conclusion" style="position:relative" class="css-1taa9ty e120i88y3"><a class="chakra-link header-anchor before css-1csu3i" href="#conclusion" dir="ltr" aria-label="conclusion permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2><p class="css-1bd2izv eaa11rl12">The standard bridge is the most flexible mechanism for asset transfers.
However, because it is so generic it is not always the easiest mechanism to use.
Especially for withdrawals, most users prefer to use <a target="_blank" rel="noopener" class="chakra-link css-1q55j7y" href="https://www.optimism.io/apps/bridges" dir="ltr">third party bridges</a> that do not wait the challenge period and do not require a Merkle proof to finalize the withdrawal.</p><p class="css-1bd2izv eaa11rl12">These bridges typically work by having assets on L1, which they provide immediately for a small fee (often less than the cost of gas for a standard bridge withdrawal).
When the bridge (or the people running it) anticipates being short on L1 assets it transfers sufficient assets from L2. As these are very big withdrawals, the withdrawal cost is amortized over a large amount and is a much smaller percentage.</p><p class="css-1bd2izv eaa11rl12">Hopefully this article helped you understand more about how layer 2 works, and how to write Solidity code that is clear and secure.</p><style data-emotion="css 17xp7bq">.css-17xp7bq{margin-top:3rem;border:1px solid #e5e5e5;background:#f7f7f7;padding:1rem;border-radius:4px;}</style><div class="css-17xp7bq e120i88y0"><div><style data-emotion="css 10j6lk1">.css-10j6lk1{position:fixed;background:rgba(0, 0, 0, 0.7);will-change:opacity;top:0;bottom:0;left:50%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);width:100%;}</style><div class="css-10j6lk1 e1ddrl7v5" style="opacity:0;z-index:-1"></div></div><style data-emotion="css 1ooii2f">.css-1ooii2f{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:relative;border-radius:2px;padding:0.5rem;}@media (max-width: 768px){.css-1ooii2f{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-top:0rem;padding-left:0rem;padding-right:0rem;border-bottom:0px solid #e5e5e5;}}@media (max-width: 1024px){.css-1ooii2f{border-bottom:0px solid #e5e5e5;}}</style><div class="css-1ooii2f e2kddvs16"><style data-emotion="css 1lf8hl7">.css-1lf8hl7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:relative;border-radius:2px;padding:0.5rem;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;position:absolute;width:100%;height:100%;left:0;top:0;opacity:1;-webkit-transition:opacity 0.15s ease-in-out;transition:opacity 0.15s ease-in-out;}@media (max-width: 768px){.css-1lf8hl7{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-top:0rem;padding-left:0rem;padding-right:0rem;border-bottom:0px solid #e5e5e5;}}@media (max-width: 1024px){.css-1lf8hl7{border-bottom:0px solid #e5e5e5;}}</style><div class="css-1lf8hl7 e2kddvs15"><style data-emotion="css 167hr1x">.css-167hr1x{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:1rem;-webkit-flex:1;-ms-flex:1;flex:1;}@media (max-width: 768px){.css-167hr1x{font-size:0.875rem;}}@media (max-width: 1024px){.css-167hr1x{margin-right:2rem;}}@media (max-width: 768px){.css-167hr1x{margin-right:1rem;-webkit-flex:none;-ms-flex:none;flex:none;}}</style><div class="css-167hr1x e2kddvs13"><style data-emotion="css zzhqg7">.css-zzhqg7{height:40px;width:40px;margin-right:0.5rem;border-radius:50%;font-size:0;background:linear-gradient(
    -90deg,
    #ececec 0%,
    #f2f2f2 50%,
    #ececec 100%
  );-webkit-background-size:400% 400%;background-size:400% 400%;-webkit-animation:pulse 1.2s ease-in-out infinite;animation:pulse 1.2s ease-in-out infinite;}@-webkit-keyframes pulse{0%{-webkit-background-position:0% 0%;background-position:0% 0%;}100%{-webkit-background-position:-135% 0%;background-position:-135% 0%;}}@keyframes pulse{0%{-webkit-background-position:0% 0%;background-position:0% 0%;}100%{-webkit-background-position:-135% 0%;background-position:-135% 0%;}}</style><div class="css-zzhqg7 e2kddvs11"></div><style data-emotion="css sr2jot">.css-sr2jot{line-height:130%;color:#666666;font-size:0;background:linear-gradient(
    -90deg,
    #ececec 0%,
    #f2f2f2 50%,
    #ececec 100%
  );-webkit-background-size:400% 400%;background-size:400% 400%;-webkit-animation:pulse 1.2s ease-in-out infinite;animation:pulse 1.2s ease-in-out infinite;height:40px;-webkit-flex:1;-ms-flex:1;flex:1;border-radius:3px;}@-webkit-keyframes pulse{0%{-webkit-background-position:0% 0%;background-position:0% 0%;}100%{-webkit-background-position:-135% 0%;background-position:-135% 0%;}}@keyframes pulse{0%{-webkit-background-position:0% 0%;background-position:0% 0%;}100%{-webkit-background-position:-135% 0%;background-position:-135% 0%;}}</style><div class="css-sr2jot e2kddvs9"></div></div><style data-emotion="css 1jgl906">.css-1jgl906{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;font-size:0;background:linear-gradient(
    -90deg,
    #ececec 0%,
    #f2f2f2 50%,
    #ececec 100%
  );-webkit-background-size:400% 400%;background-size:400% 400%;-webkit-animation:pulse 1.2s ease-in-out infinite;animation:pulse 1.2s ease-in-out infinite;width:145px;border-radius:3px;}@-webkit-keyframes pulse{0%{-webkit-background-position:0% 0%;background-position:0% 0%;}100%{-webkit-background-position:-135% 0%;background-position:-135% 0%;}}@keyframes pulse{0%{-webkit-background-position:0% 0%;background-position:0% 0%;}100%{-webkit-background-position:-135% 0%;background-position:-135% 0%;}}@media (max-width: 1024px){.css-1jgl906{margin-top:1rem;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:40px;}}@media (max-width: 768px){.css-1jgl906{width:100%;margin-top:1rem;}}</style><div class="css-1jgl906 e2kddvs7"></div></div><style data-emotion="css 10y8jji">.css-10y8jji{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:1rem;}@media (max-width: 768px){.css-10y8jji{font-size:0.875rem;}}</style><div class="css-10y8jji e2kddvs14"><style data-emotion="css it486x">.css-it486x{height:40px;width:40px;margin-right:0.5rem;border-radius:50%;}</style><img class="css-it486x e2kddvs12"/><style data-emotion="css 4qcb6s">.css-4qcb6s{line-height:130%;color:#666666;}</style><div class="css-4qcb6s e2kddvs10"><span>Last edit</span>:<!-- --> <span></span>,<!-- --> <!-- -->Invalid DateTime</div></div><style data-emotion="css nnlhef">.css-nnlhef{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}</style><div class="css-nnlhef e2kddvs8"><style data-emotion="css rs884s">.css-rs884s{-webkit-text-decoration:none;text-decoration:none;display:inline-block;white-space:nowrap;padding:0.5rem 0.75rem;font-size:1rem;border-radius:0.25em;text-align:center;cursor:pointer;color:#333333;border:1px solid #333333;background-color:transparent;background-color:#ffffff;margin-top:0;height:40px;border:0px;visibility:hidden;}.css-rs884s:disabled{opacity:0.4;cursor:not-allowed;}.css-rs884s:hover{color:#1c1cff;border:1px solid #1c1cff;box-shadow:4px 4px 0px 0px #d2d2f9;}.css-rs884s:active{background-color:#e5e5e5;}.css-rs884s:hover{border:0px;}@media (max-width: 1024px){.css-rs884s{margin-top:1rem;margin-bottom:0.5rem;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}}</style><button class="css-rs884s e2kddvs6"><span>See contributors</span></button><style data-emotion="css 1jv3gjf">.css-1jv3gjf{margin-top:0;height:40px;}@media (min-width: 1024px){.css-1jv3gjf{display:none;}}</style><style data-emotion="css eor062">.css-eor062{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);border:var(--eth-borders-1px);border-color:var(--eth-colors-text);color:var(--eth-colors-text);background:var(--eth-colors-transparent);-webkit-text-decoration:none;text-decoration:none;margin-top:0;height:40px;}.css-eor062:focus-visible,.css-eor062[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-eor062[disabled],.css-eor062[aria-disabled=true],.css-eor062[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);}.css-eor062:hover,.css-eor062[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-primary);background:var(--eth-colors-background);color:var(--eth-colors-primary);border-color:var(--eth-colors-primary);}.css-eor062:hover[disabled],.css-eor062[data-hover][disabled],.css-eor062:hover[aria-disabled=true],.css-eor062[data-hover][aria-disabled=true],.css-eor062:hover[data-disabled],.css-eor062[data-hover][data-disabled]{background:initial;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.css-eor062:focus,.css-eor062[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);border-color:var(--eth-colors-background);}.css-eor062:focus[disabled],.css-eor062[data-focus][disabled],.css-eor062:focus[aria-disabled=true],.css-eor062[data-focus][aria-disabled=true],.css-eor062:focus[data-disabled],.css-eor062[data-focus][data-disabled]{color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.chakra-button__group[data-attached]>.css-eor062:not(:last-of-type){-webkit-margin-end:-1px;margin-inline-end:-1px;}.css-eor062:active,.css-eor062[data-active]{background:var(--eth-colors-primaryLight);color:var(--eth-colors-primary);border-color:var(--eth-colors-primary);}@media (min-width: 1024px){.css-eor062{display:none;}}</style><style data-emotion="css 1heqm8i">.css-1heqm8i{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);border:var(--eth-borders-1px);border-color:var(--eth-colors-text);color:var(--eth-colors-text);background:var(--eth-colors-transparent);-webkit-text-decoration:none;text-decoration:none;margin-top:0;height:40px;}.css-1heqm8i:hover,.css-1heqm8i[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-1heqm8i:focus-visible,.css-1heqm8i[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1heqm8i:focus,.css-1heqm8i[data-focus]{box-shadow:var(--eth-shadows-none);}.css-1heqm8i::after{margin-left:var(--eth-space-0-5);margin-right:var(--eth-space-1-5);}.css-1heqm8i:focus-visible,.css-1heqm8i[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-1heqm8i[disabled],.css-1heqm8i[aria-disabled=true],.css-1heqm8i[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);}.css-1heqm8i:hover,.css-1heqm8i[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-primary);background:var(--eth-colors-background);color:var(--eth-colors-primary);border-color:var(--eth-colors-primary);}.css-1heqm8i:hover[disabled],.css-1heqm8i[data-hover][disabled],.css-1heqm8i:hover[aria-disabled=true],.css-1heqm8i[data-hover][aria-disabled=true],.css-1heqm8i:hover[data-disabled],.css-1heqm8i[data-hover][data-disabled]{background:initial;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.css-1heqm8i:focus,.css-1heqm8i[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);border-color:var(--eth-colors-background);}.css-1heqm8i:focus[disabled],.css-1heqm8i[data-focus][disabled],.css-1heqm8i:focus[aria-disabled=true],.css-1heqm8i[data-focus][aria-disabled=true],.css-1heqm8i:focus[data-disabled],.css-1heqm8i[data-focus][data-disabled]{color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.chakra-button__group[data-attached]>.css-1heqm8i:not(:last-of-type){-webkit-margin-end:-1px;margin-inline-end:-1px;}.css-1heqm8i:active,.css-1heqm8i[data-active]{background:var(--eth-colors-primaryLight);color:var(--eth-colors-primary);border-color:var(--eth-colors-primary);}@media (min-width: 1024px){.css-1heqm8i{display:none;}}</style><a target="_blank" rel="noopener" class="chakra-link chakra-button e2kddvs5 css-1heqm8i" href="https://github.com/ethereum/ethereum-org-website/tree/dev/src/content/developers/tutorials/optimism-std-bridge-annotated-code/index.md" dir="ltr"><style data-emotion="css 1g7ixto">.css-1g7ixto{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="css-1g7ixto e2kddvs4"><style data-emotion="css 1o26u78">.css-1o26u78{fill:#b2b2b2;fill:#333333;margin-right:0.5rem;}.css-1o26u78:hover svg{fill:#1c1cff;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="css-1o26u78 e2kddvs3" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span><span>Edit page</span></span></div></a></div></div></div><style data-emotion="css 13i3mb1">.css-13i3mb1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border:var(--eth-borders-1px);border-color:var(--eth-colors-border);background:var(--eth-colors-feedbackGradient);border-radius:var(--eth-radii-base);padding:var(--eth-space-6);margin-bottom:var(--eth-space-4);margin-top:var(--eth-space-8);width:var(--eth-sizes-full);}</style><div class="css-13i3mb1"><style data-emotion="css tn44ti">.css-tn44ti{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--eth-space-4);}</style><div class="css-tn44ti"><style data-emotion="css n7lhop">.css-n7lhop{font-family:var(--eth-fonts-heading);font-weight:var(--eth-fontWeights-bold);font-size:1.375rem;line-height:1.33;margin:0px;margin-bottom:var(--eth-space-2);}@media screen and (min-width: 48em){.css-n7lhop{line-height:1.2;}}</style><h3 class="chakra-heading css-n7lhop"><span>Was this page helpful?</span></h3><style data-emotion="css 11f4u18">.css-11f4u18{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:var(--eth-space-4);}</style><div class="css-11f4u18"><style data-emotion="css 7oymo8">.css-7oymo8{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-base);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:42px;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);border:var(--eth-borders-1px);color:var(--eth-colors-primary);background:var(--eth-colors-transparent);border-color:var(--eth-colors-primary);}.css-7oymo8:focus-visible,.css-7oymo8[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-7oymo8[disabled],.css-7oymo8[aria-disabled=true],.css-7oymo8[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);}.css-7oymo8:hover,.css-7oymo8[data-hover]{-webkit-text-decoration:none;text-decoration:none;box-shadow:var(--eth-shadows-primary);color:var(--eth-colors-primary);background:var(--eth-colors-background);border-color:var(--eth-colors-primary);}.css-7oymo8:hover[disabled],.css-7oymo8[data-hover][disabled],.css-7oymo8:hover[aria-disabled=true],.css-7oymo8[data-hover][aria-disabled=true],.css-7oymo8:hover[data-disabled],.css-7oymo8[data-hover][data-disabled]{background:initial;box-shadow:var(--eth-shadows-none);color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.css-7oymo8:focus,.css-7oymo8[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-primary);border-color:var(--eth-colors-background);}.css-7oymo8:focus[disabled],.css-7oymo8[data-focus][disabled],.css-7oymo8:focus[aria-disabled=true],.css-7oymo8[data-focus][aria-disabled=true],.css-7oymo8:focus[data-disabled],.css-7oymo8[data-focus][data-disabled]{color:var(--eth-colors-disabled);border-color:var(--eth-colors-disabled);opacity:1;}.css-7oymo8:active,.css-7oymo8[data-active]{color:var(--eth-colors-primary);background:var(--eth-colors-primaryLight);border-color:var(--eth-colors-primary);}</style><button type="button" class="chakra-button css-7oymo8"><style data-emotion="css 1wh2kri">.css-1wh2kri{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-margin-end:0.5rem;margin-inline-end:0.5rem;}</style><span class="chakra-button__icon css-1wh2kri"><style data-emotion="css 8889cn">.css-8889cn{width:var(--eth-sizes-6);height:var(--eth-sizes-6);display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;vertical-align:middle;}</style><svg viewBox="0 0 25 25" focusable="false" class="chakra-icon css-8889cn" aria-hidden="true"><path d="M5.85334 8.04297H3.27591C2.92157 8.04297 2.63153 8.33154 2.63153 8.68731L2.63153 20.2858C2.63153 20.6414 2.9203 20.9301 3.27591 20.9301H5.85334C6.20894 20.9301 6.49771 20.6414 6.49771 20.2858L6.49771 8.68731C6.49771 8.33154 6.20763 8.04297 5.85334 8.04297Z" fill="currentColor"></path><path d="M20.7596 8.04527C20.6558 8.02769 15.7969 8.04527 15.7969 8.04527L16.4756 6.19371C16.9439 4.9149 16.6407 2.96231 15.3413 2.26812C14.9183 2.04208 14.3272 1.92855 13.8506 2.04851C13.5773 2.11728 13.3371 2.29823 13.1939 2.54066C13.0293 2.81948 13.0463 3.14495 12.9877 3.45411C12.839 4.23826 12.4684 4.98383 11.8947 5.54344C10.8942 6.51914 7.7865 9.33395 7.7865 9.33395L7.7865 19.6437L18.5258 19.6437C19.975 19.6446 20.9246 18.0263 20.2099 16.7623C21.0619 16.2166 21.3533 15.0673 20.8543 14.1848C21.7063 13.6392 21.9976 12.4899 21.4987 11.6074C22.9687 10.6659 22.4772 8.33577 20.7596 8.04527Z" fill="currentColor"></path></svg></span><span>Yes</span></button><button type="button" class="chakra-button css-7oymo8"><span class="chakra-button__icon css-1wh2kri"><style data-emotion="css 1rf6jrc">.css-1rf6jrc{width:var(--eth-sizes-6);height:var(--eth-sizes-6);display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;vertical-align:middle;-webkit-transform:scaleY(-1);-moz-transform:scaleY(-1);-ms-transform:scaleY(-1);transform:scaleY(-1);}</style><svg viewBox="0 0 25 25" focusable="false" class="chakra-icon css-1rf6jrc" aria-hidden="true"><path d="M5.85334 8.04297H3.27591C2.92157 8.04297 2.63153 8.33154 2.63153 8.68731L2.63153 20.2858C2.63153 20.6414 2.9203 20.9301 3.27591 20.9301H5.85334C6.20894 20.9301 6.49771 20.6414 6.49771 20.2858L6.49771 8.68731C6.49771 8.33154 6.20763 8.04297 5.85334 8.04297Z" fill="currentColor"></path><path d="M20.7596 8.04527C20.6558 8.02769 15.7969 8.04527 15.7969 8.04527L16.4756 6.19371C16.9439 4.9149 16.6407 2.96231 15.3413 2.26812C14.9183 2.04208 14.3272 1.92855 13.8506 2.04851C13.5773 2.11728 13.3371 2.29823 13.1939 2.54066C13.0293 2.81948 13.0463 3.14495 12.9877 3.45411C12.839 4.23826 12.4684 4.98383 11.8947 5.54344C10.8942 6.51914 7.7865 9.33395 7.7865 9.33395L7.7865 19.6437L18.5258 19.6437C19.975 19.6446 20.9246 18.0263 20.2099 16.7623C21.0619 16.2166 21.3533 15.0673 20.8543 14.1848C21.7063 13.6392 21.9976 12.4899 21.4987 11.6074C22.9687 10.6659 22.4772 8.33577 20.7596 8.04527Z" fill="currentColor"></path></svg></span><span>No</span></button></div></div></div></article><style data-emotion="css fjl81y">.css-fjl81y{padding-top:4rem;}</style></div></div></div></div><style data-emotion="css mope0u">.css-mope0u{padding:1rem 2rem;}</style><footer class="css-mope0u"><style data-emotion="css g3escw">.css-g3escw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;font-size:var(--eth-fontSizes-sm);}</style><div class="css-g3escw"><style data-emotion="css zj5ei5">.css-zj5ei5{color:var(--eth-colors-text200);}</style><div class="css-zj5ei5"><span>Website last updated</span>:<!-- --> <!-- -->February 5, 2023</div><style data-emotion="css 9p2ato">.css-9p2ato{margin-top:var(--eth-space-4);margin-bottom:var(--eth-space-4);}</style><div class="css-9p2ato"><style data-emotion="css mjcypk">.css-mjcypk{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-secondary);}.css-mjcypk:hover,.css-mjcypk[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-mjcypk:focus-visible,.css-mjcypk[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-mjcypk:focus,.css-mjcypk[data-focus]{box-shadow:var(--eth-shadows-none);}.css-mjcypk::after{margin-left:var(--eth-space-0-5);margin-right:var(--eth-space-1-5);}</style><a target="_blank" rel="noopener" class="chakra-link css-mjcypk" href="https://github.com/ethereum/ethereum-org-website" dir="ltr" aria-label="GitHub"><style data-emotion="css 1e3y76h">.css-1e3y76h{width:1em;height:1em;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;font-size:var(--eth-fontSizes-4xl);margin-left:var(--eth-space-4);}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" focusable="false" class="chakra-icon css-1e3y76h" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a target="_blank" rel="noopener" class="chakra-link css-mjcypk" href="https://twitter.com/ethdotorg" dir="ltr" aria-label="Twitter"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" focusable="false" class="chakra-icon css-1e3y76h" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a target="_blank" rel="noopener" class="chakra-link css-mjcypk" href="https://youtube.com/channel/UCNOfzGXD_C9YMYmnefmPH0g" dir="ltr" aria-label="Youtube"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" focusable="false" class="chakra-icon css-1e3y76h" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a><a target="_blank" rel="noopener" class="chakra-link css-mjcypk" href="https://discord.gg/CetY6Y4" dir="ltr" aria-label="Discord"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" focusable="false" class="chakra-icon css-1e3y76h" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"></path></svg></a></div></div><style data-emotion="css 1wxqu7o">.css-1wxqu7o{display:grid;grid-gap:var(--eth-space-4);grid-template-columns:repeat(6, auto);-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}@media (max-width: 1300px){.css-1wxqu7o{grid-template-columns:repeat(3, auto);}}@media (max-width: 48em){.css-1wxqu7o{grid-template-columns:repeat(2, auto);}}@media (max-width: 500px){.css-1wxqu7o{grid-template-columns:auto;}}</style><div class="css-1wxqu7o"><div class="css-0"><style data-emotion="css nubok3">.css-nubok3{font-family:var(--eth-fonts-heading);font-weight:var(--eth-fontWeights-bold);font-size:var(--eth-fontSizes-sm);line-height:1.6;margin-top:1.14em;margin-bottom:1.14em;}</style><h3 class="chakra-heading css-nubok3"><span>Use Ethereum</span></h3><style data-emotion="css vplvyu">.css-vplvyu{list-style-type:none;font-size:var(--eth-fontSizes-sm);line-height:1.6;font-weight:400;margin:0px;}</style><ul role="list" class="css-vplvyu"><style data-emotion="css 679ng4">.css-679ng4{margin-bottom:var(--eth-space-4);}</style><li class="css-679ng4"><style data-emotion="css 1xiparb">.css-1xiparb{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-text200);white-space:normal;}.css-1xiparb:hover,.css-1xiparb[data-hover]{-webkit-text-decoration:none;text-decoration:none;color:var(--eth-colors-primary);}.css-1xiparb:hover::after,.css-1xiparb[data-hover]::after{color:var(--eth-colors-primary);}.css-1xiparb:hover svg,.css-1xiparb[data-hover] svg{fill:var(--eth-colors-primary);}.css-1xiparb:focus-visible,.css-1xiparb[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-1xiparb:focus,.css-1xiparb[data-focus]{box-shadow:var(--eth-shadows-none);}.css-1xiparb svg{fill:var(--eth-colors-text200);}</style><a class="chakra-link css-1xiparb" dir="ltr" href="/en/wallets/find-wallet/"><span>Find wallet</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/get-eth/"><span>Get ETH</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/dapps/"><span>Decentralized applications (dapps)</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/layer-2/"><span>Layer 2</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/run-a-node/"><span>Run a node</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/stablecoins/"><span>Stablecoins</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/staking/"><span>Stake ETH</span></a></li></ul></div><div class="css-0"><h3 class="chakra-heading css-nubok3"><span>Learn</span></h3><ul role="list" class="css-vplvyu"><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/what-is-ethereum/"><span>What is Ethereum?</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/eth/"><span>What is ether (ETH)?</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/wallets/"><span>Ethereum wallets</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/learn/"><span>Community guides and resources</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/history/"><span>History of Ethereum</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/whitepaper/"><span>Ethereum Whitepaper</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/upgrades/"><span>Ethereum upgrades</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/security/"><span>Ethereum security and scam prevention</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/glossary/"><span>Ethereum glossary</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/governance/"><span>Ethereum governance</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/bridges/"><span>Blockchain bridges</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/zero-knowledge-proofs/"><span>Zero-knowledge proofs</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/energy-consumption/"><span>Ethereum energy consumption</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/web3/"><span>What is Web3?</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/eips/"><span>Ethereum Improvement Proposals</span></a></li></ul></div><div class="css-0"><h3 class="chakra-heading css-nubok3"><span>Developers</span></h3><ul role="list" class="css-vplvyu"><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/developers/"><span>Get started</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/developers/docs/"><span>Documentation</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/developers/tutorials/"><span>Tutorials</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/developers/learning-tools/"><span>Learn by coding</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/developers/local-environment/"><span>Set up local environment</span></a></li></ul></div><div class="css-0"><h3 class="chakra-heading css-nubok3"><span>Ecosystem</span></h3><ul role="list" class="css-vplvyu"><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/community/"><span>Community hub</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/foundation/"><span>Ethereum Foundation</span></a></li><li class="css-679ng4"><style data-emotion="css qnfatj">.css-qnfatj{transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-fast);transition-timing-function:var(--eth-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:2px solid transparent;outline-offset:2px;color:var(--eth-colors-text200);}.css-qnfatj:hover,.css-qnfatj[data-hover]{-webkit-text-decoration:none;text-decoration:none;color:var(--eth-colors-primary);}.css-qnfatj:hover::after,.css-qnfatj[data-hover]::after{color:var(--eth-colors-primary);}.css-qnfatj:hover svg,.css-qnfatj[data-hover] svg{fill:var(--eth-colors-primary);}.css-qnfatj:focus-visible,.css-qnfatj[data-focus-visible]{box-shadow:var(--eth-shadows-none);outline:auto;}.css-qnfatj:focus,.css-qnfatj[data-focus]{box-shadow:var(--eth-shadows-none);}.css-qnfatj::after{content:"↗";margin-left:var(--eth-space-0-5);margin-right:var(--eth-space-1-5);}.css-qnfatj svg{fill:var(--eth-colors-text200);}</style><a target="_blank" rel="noopener" class="chakra-link css-qnfatj" href="https://blog.ethereum.org/" dir="ltr"><span>Ethereum Foundation Blog</span></a></li><li class="css-679ng4"><a target="_blank" rel="noopener" class="chakra-link css-qnfatj" href="https://esp.ethereum.foundation" dir="ltr"><span>Ecosystem Support Program</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/bug-bounty/"><span>Ethereum bug bounty program</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/community/grants/"><span>Ecosystem Grant Programs</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/assets/"><span>Ethereum brand assets</span></a></li><li class="css-679ng4"><a target="_blank" rel="noopener" class="chakra-link css-qnfatj" href="https://devcon.org/" dir="ltr"><span>Devcon</span></a></li></ul></div><div class="css-0"><h3 class="chakra-heading css-nubok3"><span>Enterprise</span></h3><ul role="list" class="css-vplvyu"><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/enterprise/"><span>Mainnet Ethereum</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/enterprise/private-ethereum/"><span>Private Ethereum</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/enterprise/"><span>Enterprise</span></a></li></ul></div><div class="css-0"><h3 class="chakra-heading css-nubok3"><span>About ethereum.org</span></h3><ul role="list" class="css-vplvyu"><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/about/"><span>About us</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/about/#open-jobs"><span>Jobs</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/contributing/"><span>Contributing</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/languages/"><span>Language support</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/privacy-policy/"><span>Privacy policy</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/terms-of-use/"><span>Terms of use</span></a></li><li class="css-679ng4"><a class="chakra-link css-1xiparb" dir="ltr" href="/en/cookie-policy/"><span>Cookie policy</span></a></li><li class="css-679ng4"><a target="_blank" rel="noopener" class="chakra-link css-qnfatj" href="mailto:press@ethereum.org" dir="ltr"><span>Contact</span></a></li></ul></div></div></footer><style data-emotion="css 5zqviv">.css-5zqviv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:-webkit-sticky;position:sticky;white-space:normal;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--eth-radii-full);font-weight:var(--eth-fontWeights-normal);transition-property:var(--eth-transition-property-common);transition-duration:var(--eth-transition-duration-normal);height:3rem;min-width:var(--eth-sizes-10);font-size:var(--eth-fontSizes-md);-webkit-padding-start:var(--eth-space-4);padding-inline-start:var(--eth-space-4);-webkit-padding-end:var(--eth-space-4);padding-inline-end:var(--eth-space-4);background:var(--eth-colors-primary);color:var(--eth-colors-buttonColor);border:0;width:3rem;box-shadow:tableItemBox;bottom:1rem;-webkit-margin-start:auto;margin-inline-start:auto;margin-top:150vh;right:var(--eth-space-4);z-index:98;-webkit-transition:-webkit-transform 0.2s ease-in-out,width 0.25s linear,border-radius 0.25s linear;transition:transform 0.2s ease-in-out,width 0.25s linear,border-radius 0.25s linear;}.css-5zqviv:focus-visible,.css-5zqviv[data-focus-visible]{box-shadow:var(--eth-shadows-outline);}.css-5zqviv[disabled],.css-5zqviv[aria-disabled=true],.css-5zqviv[data-disabled]{opacity:1;cursor:not-allowed;box-shadow:var(--eth-shadows-none);background:var(--eth-colors-disabled);}.css-5zqviv:hover,.css-5zqviv[data-hover]{cursor:pointer;-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);-webkit-transition:-webkit-transform 0.2s ease-in-out;transition:transform 0.2s ease-in-out;}.css-5zqviv:focus,.css-5zqviv[data-focus]{box-shadow:var(--eth-shadows-outline);outline:2px solid transparent;outline-offset:2px;}.css-5zqviv:active,.css-5zqviv[data-active]{background:var(--eth-colors-primaryHover);}@media screen and (min-width: 62em){.css-5zqviv{width:3rem;bottom:var(--eth-space-4);margin-top:inherit;}}</style><button type="button" class="chakra-button css-5zqviv" id="dot"><style data-emotion="css 1pw55pt">.css-1pw55pt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-ms-flex-pack:space-evenly;-webkit-justify-content:space-evenly;justify-content:space-evenly;width:3rem;position:inherit;}@media screen and (min-width: 62em){.css-1pw55pt{width:3rem;position:inherit;}}</style><div class="css-1pw55pt"><style data-emotion="css 1uo4jy3">.css-1uo4jy3{width:26px;height:32px;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:var(--eth-colors-white);vertical-align:middle;margin-top:11px;margin-bottom:11px;}</style><svg viewBox="0 0 26 32" focusable="false" class="chakra-icon css-1uo4jy3"><path d="M0.644377 6.04297H3.2218C3.5761 6.04297 3.86618 6.33203 3.86618 6.6875L3.86618 18.2852C3.86618 18.5 3.76259 18.6875 3.6031 18.8047C3.4963 18.8828 3.36442 18.9297 3.2218 18.9297H0.644377C0.288763 18.9297 -1.90735e-06 18.6406 -1.90735e-06 18.2852L-1.90735e-06 6.6875C-1.90735e-06 6.33203 0.290037 6.04297 0.644377 6.04297Z" fill="currentColor"></path><path d="M13.1654 6.04688C13.1654 6.04688 18.0243 6.02734 18.1281 6.04688C19.8457 6.33594 20.3371 8.66406 18.8671 9.60547C19.3661 10.4883 19.0748 11.6406 18.2228 12.1836C18.7217 13.0664 18.4303 14.2148 17.5784 14.7617C18.2931 16.0273 17.3434 17.6445 15.8943 17.6445H5.15497L5.15497 7.33203C5.15497 7.33203 8.26271 4.51953 9.26312 3.54297C9.83691 2.98437 10.2074 2.23828 10.3561 1.45312L10.3947 1.18359C10.4204 0.960937 10.446 0.738281 10.5624 0.539062C10.7056 0.296875 10.9458 0.117187 11.2191 0.046875C11.6956 -0.0703125 12.2867 0.0429688 12.7098 0.269531C14.0092 0.960938 14.3124 2.91406 13.8441 4.19531L13.1654 6.04688Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M7.87193 25.1172C7.97569 25.1368 12.8346 25.1172 12.8346 25.1172L12.1559 26.9688C11.6876 28.25 11.9908 30.2032 13.2902 30.8946C13.7132 31.1211 14.3044 31.2344 14.7809 31.1172C15.0542 31.0469 15.2944 30.8672 15.4376 30.625C15.5538 30.426 15.5795 30.2036 15.6052 29.9812L15.6439 29.711C15.7926 28.9258 16.1631 28.1797 16.7369 27.6211C17.7373 26.6446 20.845 23.8321 20.845 23.8321V13.5196H19.4396C19.3628 14.0799 19.1268 14.6156 18.7527 15.0516C19.1515 16.8035 17.8156 18.6447 15.8943 18.6447H7.6287C7.66657 18.7596 7.71594 18.8721 7.77724 18.9805C6.92525 19.5235 6.6339 20.6758 7.13287 21.5586C5.66286 22.5 6.15432 24.8282 7.87193 25.1172ZM22.7782 25.1211H25.3556C25.71 25.1211 26 24.8321 26 24.4766L26 12.879C26 12.5235 25.7112 12.2344 25.3556 12.2344H22.7782C22.6356 12.2344 22.5037 12.2813 22.3969 12.3594C22.2374 12.4766 22.1338 12.6641 22.1338 12.879L22.1338 24.4766C22.1338 24.8321 22.4239 25.1211 22.7782 25.1211Z" fill="currentColor"></path></svg></div></button></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div><span></span></div><script>
    window.dev = undefined
    if (window.dev === true || !(navigator.doNotTrack === '1' || window.doNotTrack === '1')) {
      window._paq = window._paq || [];
      
      
      
      
      
      window._paq.push(['setTrackerUrl', 'https://matomo.ethereum.org/matomo.php']);
      window._paq.push(['setSiteId', '4']);
      window._paq.push(['enableHeartBeatTimer']);
      window.start = new Date();

      (function() {
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src='https://matomo.ethereum.org/matomo.js'; s.parentNode.insertBefore(g,s);
      })();

      if (window.dev === true) {
        console.debug('[Matomo] Tracking initialized')
        console.debug('[Matomo] matomoUrl: https://matomo.ethereum.org, siteId: 4')
      }
    }
  </script><noscript><img src="https://matomo.ethereum.org/matomo.php?idsite=4&rec=1&url=https://ethereum.org/en/developers/tutorials/optimism-std-bridge-annotated-code/" style="border:0" alt="tracker" /></noscript><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/en/developers/tutorials/optimism-std-bridge-annotated-code/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-9ee95241d217c316e8cb.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-7d28a998b60c51296f80.js\"],\"component---src-pages-assets-tsx\":[\"/component---src-pages-assets-tsx-a396d4845137261f268c.js\"],\"component---src-pages-bug-bounty-tsx\":[\"/component---src-pages-bug-bounty-tsx-e5a02dbf74562d72d0dd.js\"],\"component---src-pages-community-tsx\":[\"/component---src-pages-community-tsx-6d44104f6c0b62851dd2.js\"],\"component---src-pages-conditional-dapps-tsx\":[\"/component---src-pages-conditional-dapps-tsx-00ec80bfc41204e59c0c.js\"],\"component---src-pages-conditional-eth-tsx\":[\"/component---src-pages-conditional-eth-tsx-de7a8a07a7053627955d.js\"],\"component---src-pages-conditional-wallets-tsx\":[\"/component---src-pages-conditional-wallets-tsx-6dede9c8d2db4fe38c0a.js\"],\"component---src-pages-conditional-what-is-ethereum-tsx\":[\"/component---src-pages-conditional-what-is-ethereum-tsx-338b5dfad3710c7a5224.js\"],\"component---src-pages-contributing-translation-program-acknowledgements-tsx\":[\"/component---src-pages-contributing-translation-program-acknowledgements-tsx-73d8956aa7e76e8e2080.js\"],\"component---src-pages-contributing-translation-program-contributors-tsx\":[\"/component---src-pages-contributing-translation-program-contributors-tsx-1186309335deeeed881c.js\"],\"component---src-pages-developers-index-tsx\":[\"/component---src-pages-developers-index-tsx-b48b11dbd74a2c01ef46.js\"],\"component---src-pages-developers-learning-tools-tsx\":[\"/component---src-pages-developers-learning-tools-tsx-58658044f31cc860bc48.js\"],\"component---src-pages-developers-local-environment-tsx\":[\"/component---src-pages-developers-local-environment-tsx-9eee1c193fb7465ba84e.js\"],\"component---src-pages-developers-tutorials-tsx\":[\"/component---src-pages-developers-tutorials-tsx-0fec6d51e76fa36e57f9.js\"],\"component---src-pages-get-eth-tsx\":[\"/component---src-pages-get-eth-tsx-d931e39c305b4595d9d9.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-b5f414d49db4c5a3b423.js\"],\"component---src-pages-languages-tsx\":[\"/component---src-pages-languages-tsx-bc3c2db98604fbe23268.js\"],\"component---src-pages-layer-2-tsx\":[\"/component---src-pages-layer-2-tsx-538ed38d8dcc22cc87fe.js\"],\"component---src-pages-learn-index-tsx\":[\"/component---src-pages-learn-index-tsx-fbe43ab4236bfacef7e9.js\"],\"component---src-pages-run-a-node-tsx\":[\"/component---src-pages-run-a-node-tsx-5186400288996134c26e.js\"],\"component---src-pages-stablecoins-tsx\":[\"/component---src-pages-stablecoins-tsx-bd5d53170a87f216f85a.js\"],\"component---src-pages-staking-deposit-contract-tsx\":[\"/component---src-pages-staking-deposit-contract-tsx-ebd5c3029a316f3b9c61.js\"],\"component---src-pages-staking-index-tsx\":[\"/component---src-pages-staking-index-tsx-80b95817430a1b2e0a68.js\"],\"component---src-pages-studio-tsx\":[\"/component---src-pages-studio-tsx-544375518e48b9def685.js\"],\"component---src-pages-upgrades-get-involved-index-tsx\":[\"/component---src-pages-upgrades-get-involved-index-tsx-e66537084d90c9dbddc8.js\"],\"component---src-pages-upgrades-index-tsx\":[\"/component---src-pages-upgrades-index-tsx-f8395dc08d945e6fd765.js\"],\"component---src-pages-upgrades-vision-tsx\":[\"/component---src-pages-upgrades-vision-tsx-c7bc1304bd30b570c622.js\"],\"component---src-pages-wallets-find-wallet-tsx\":[\"/component---src-pages-wallets-find-wallet-tsx-677b366eb76a372ebc89.js\"],\"component---src-templates-docs-tsx\":[\"/component---src-templates-docs-tsx-b247c0e06d8b6e04990c.js\"],\"component---src-templates-job-tsx\":[\"/component---src-templates-job-tsx-6a9640610e1ccfd453c5.js\"],\"component---src-templates-staking-tsx\":[\"/component---src-templates-staking-tsx-aa797319806417e8ecb3.js\"],\"component---src-templates-static-tsx\":[\"/component---src-templates-static-tsx-58f105a2b64ce76428d8.js\"],\"component---src-templates-tutorial-tsx\":[\"/component---src-templates-tutorial-tsx-58b08d1de7593ca85f16.js\"],\"component---src-templates-upgrade-tsx\":[\"/component---src-templates-upgrade-tsx-1d1fc72ba1757c056c7a.js\"],\"component---src-templates-use-cases-tsx\":[\"/component---src-templates-use-cases-tsx-df0db3973e1285930d9f.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="8e34fadb4a3a733636d7";</script><script src="/webpack-runtime-8508d8f91b2c90a8ff51.js" async></script><script src="/framework-36d1478a2eca0373131c.js" async></script><script src="/252f366e-bf09bd6c1198236a0e11.js" async></script><script src="/ae51ba48-52b1324c5f3deb31340f.js" async></script><script src="/1bfc9850-5b8defbfbe9e9455c923.js" async></script><script src="/0c428ae2-d8ee0eeac5ee274335f1.js" async></script><script src="/0f1ac474-3b767eeb18bd78e70cb5.js" async></script><script src="/60a7b22c-5e48d0a3d696e918a10e.js" async></script><script src="/a38b39a1-a4e0a8263d0caec51710.js" async></script><script src="/app-9ee95241d217c316e8cb.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>